{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/channels/isSoundCloud.js","webpack:///./src/util/gl-utils.js","webpack:///./src/util/isSmallScreen.js","webpack:///./src/util/shaders/getFragmentCode.js","webpack:///./src/scene.js","webpack:///./src/util/createShaders.js","webpack:///./src/util/request.js","webpack:///./src/util/loadGist.js","webpack:///./src/editor/shaderCodeState.js","webpack:///./src/main.js","webpack:///./src/editor/parserServer.js","webpack:///./src/editor/pragmaParser.js","webpack:///./src/appState.js","webpack:///./src/util/shaders/main.glsl","webpack:///./src/editor/getParsedShaderFunction.js","webpack:///./src/channelsState.js","webpack:///./src/getGL.js","webpack:///./src/util/shaders/bezier.glsl","webpack:///./src/util/loadImage.js","webpack:///./src/util/shaders/complex.glsl","webpack:///./src/channels/loadSoundCloudStream.js","webpack:///./src/channels/audioInput.js","webpack:///./src/editor/fetchGLSL.js","webpack:///./src/bus.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","isSoundCloud","url","match","bindTexture","gl","texture","unit","activeTexture","TEXTURE0","TEXTURE_2D","createTexture","image","level","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","texImage2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","createBuffer","buffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","bindAttribute","attribute","numComponents","enableVertexAttribArray","vertexAttribPointer","FLOAT","createProgram","vertexSource","fragmentSource","program","vertexShader","createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","wrapper","unload","numAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","numUniforms","ACTIVE_UNIFORMS","uniform","getActiveUniform","getUniformLocation","deleteProgram","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","innerWidth","complexLibrary","require","bezier","appState","getSharedPrefix","varying","webgl2","getHyperbolicFunctions","main","output","makePanzoom","createShaderCodeState","bus","util","createShaders","createChannelsState","getGL","HIDE_UI_THRESHOLD","initScene","canvas","startTime","cursor","currentX","currentY","clickX","clickY","currentFrameNumber","orientation","alpha","beta","gamma","absolute","sceneTransform","x","y","z","sceneWidth","clientWidth","sceneHeight","clientHeight","panzoom","controller","applyTransform","getOwner","restorePanzoom","nextAnimationFrame","lastActiveIntervalId","requestSizeUpdate","requestTransformUpdate","orientationChanged","lastActivityTime","Date","listenToEvents","screenProgram","quadBuffer","getCode","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","clearColor","channelsState","state","isActive","codeEditorState","updateCode","goToOrigin","setActivityMonitorEnabled","dispose","scene","animate","clear","DEPTH_BUFFER_BIT","COLOR_BUFFER_BIT","drawCurrentFrame","scheduleNextFrame","useProgram","viewport","uniform2f","iResolution","uniform3f","iTransform","render","iTime","performance","now","uniform1f","iFrame","uniform4f","iMouse","iOrientation","drawArrays","TRIANGLES","requestAnimationFrame","parserResult","updateProgram","Float32Array","a_pos","fire","showRectangle","left","right","top","bottom","innerHeight","getTransform","newTransform","tx","ty","scale","saveTransform","rect","getVisibleRectangle","markInactiveIfNeeded","enabled","setInterval","clearInterval","activate","removeEventListener","updateSize","onMouseMove","onMouseClick","onTouchStart","onTouchMove","onOrientationChange","cancelAnimationFrame","addEventListener","hasCode","firstTouch","touches","setClick","clientX","clientY","setHover","Math","PI","ex","ey","setSceneSize","width","height","getFragmentCode","options","download","req","XMLHttpRequest","updateProgress","lengthComputable","progress","loaded","total","percent","transferComplete","status","response","responseType","JSON","parse","transferFailed","transferCanceled","open","send","extractFileContent","res","parts","parsedRes","fileName","keys","files","filter","file","content","protoGist","split","catch","getParsedShaderFunction","on","parseCode","currentShaderVersion","currentShaderCode","loadCodeFromAppState","api","setCode","errorDetail","isFloatError","off","shaderCode","trySetNewCode","cancelled","updateErrorInfo","saveCode","persistedCode","getDefaultCode","customCode","currentResult","capturedVersion","getElementById","initPixelPlay","antialias","webGLEnabled","ready","launch","ide","inputSource","glslParser","check","log","errorCount","compileIDE","wglAPI","wgl2","contents","shared","sources","forEach","tokens","_lineOffsets","updateState","fetchGLSL","pragmaInclude","defineInclude","nullCode","processLineByLine","pending","lines","outputLines","currentIndex","substitutes","Map","line","index","processPragma","size","replaceDefines","join","indexOf","include","substr","insertIndex","matches","set","replacement","replace","RegExp","parsedLines","appStateReady","pendingSaveCallback","queryState","isSmallScreen","loadGist","qs","useSearch","defaultCode","currentCode","settingsPanel","collapsed","isSettingsPanelCollapsedInitially","loadError","codeLimitError","audioWarning","hideUI","addChannel","removeChannel","getActiveChannels","setSoundIOSWarning","isIOS","test","navigator","userAgent","MSStream","unset","active","Number","isFinite","fc","onChange","checkGLSL","pragmaParse","parserError","diag","diagnostics","firstError","range","lineColumn","offset","column","substring","start","end","prefix","diagText","text","whitespace","Array","libAndCode","pragmaParseResult","parsedCode","loadImage","glUtils","audioInput","imageInput","needsBinding","channelName","resName","freeze","kind","load","uniform1i","deleteTexture","getIndexOfModelWithUnit","arr","modelUnit","takenUnits","Set","MAX_UNITS_COUNT","viewModels","models","list","restoreState","activeChannels","channelInfo","frameNumber","channel","has","modelIndex","viewModelIndex","delete","hasAudio","getAvailableUnit","input","isImage","add","inputViewModel","model","ctxOptions","getContext","resolveImage","rejectImage","Image","crossOrigin","imageLoaded","reportError","loadSoundCloudStream","client_id","track_url","SC","scAPI","successCallback","errorCallback","initialize","sound","errors","errorMessage","error_message","streamUrl","streamPlaylistIndex","tracks","stream_url","audioTexture","player","analyser","audioData","fftSize","frequencyData","Uint8Array","initPlayer","getOrMakePlayerEl","playerEl","autoplay","audioCtx","AudioContext","webkitAudioContext","createAnalyser","createMediaElementSource","connect","destination","play","onPlayerEnded","onPlayerStarted","TEXTURE_MAG_FILTER","getByteFrequencyData","max","prevPosition","currentPosition","ci","previ","immediateValue","avgValue","longAvg","prevAgg","currentAgg","aggOffset","pAggOffset","aggAvgValue","aggLongAvg","halfMax","currentTime","duration","querySelector","preload","autobuffer","constrols","style","visibility","body","loadedLinks","link","trimmed","trim","cachedResponse","eventify"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAGnBC,EAAqB,CACxB,IAAO,GAMJjB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASa,EAAe7B,GACvB,OAAOyB,EAAoBK,EAAI,OAAS,GAAG9B,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,MAIpM,SAASyB,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAUgC,QAGnC,IAAIC,EAASL,EAAiB5B,GAAY,CACzCK,EAAGL,EACHkC,GAAG,EACHF,QAAS,IAUV,OANAlB,EAAQd,GAAUW,KAAKsB,EAAOD,QAASC,EAAQA,EAAOD,QAASN,GAG/DO,EAAOC,GAAI,EAGJD,EAAOD,QAKfN,EAAoBS,EAAI,SAAuBlC,GAC9C,IAAImC,EAAW,GAIXC,EAAY,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,iBAAiB,GACrER,EAAmB5B,GAAUmC,EAASvB,KAAKgB,EAAmB5B,IACzB,IAAhC4B,EAAmB5B,IAAkBoC,EAAUpC,IACtDmC,EAASvB,KAAKgB,EAAmB5B,GAAW,IAAIqC,SAAQ,SAASC,EAASC,GAIzE,IAHA,IAAIC,EAAO,QAAU,GAAGxC,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,OAC5KyC,EAAWhB,EAAoBK,EAAIU,EACnCE,EAAmBC,SAASC,qBAAqB,QAC7CxC,EAAI,EAAGA,EAAIsC,EAAiBpC,OAAQF,IAAK,CAChD,IAAIyC,EAAMH,EAAiBtC,GACvB0C,EAAWD,EAAIE,aAAa,cAAgBF,EAAIE,aAAa,QACjE,GAAe,eAAZF,EAAIG,MAAyBF,IAAaN,GAAQM,IAAaL,GAAW,OAAOH,IAErF,IAAIW,EAAoBN,SAASC,qBAAqB,SACtD,IAAQxC,EAAI,EAAGA,EAAI6C,EAAkB3C,OAAQF,IAAK,CAC7CyC,EAAMI,EAAkB7C,GACxB0C,EAAWD,EAAIE,aAAa,aAChC,GAAGD,IAAaN,GAAQM,IAAaL,EAAU,OAAOH,IAEvD,IAAIY,EAAUP,SAASQ,cAAc,QACrCD,EAAQF,IAAM,aACdE,EAAQE,KAAO,WACfF,EAAQG,OAASf,EACjBY,EAAQI,QAAU,SAASC,GAC1B,IAAIC,EAAUD,GAASA,EAAME,QAAUF,EAAME,OAAOC,KAAOjB,EACvDkB,EAAM,IAAIC,MAAM,qBAAuB5D,EAAU,cAAgBwD,EAAU,KAC/EG,EAAIE,KAAO,wBACXF,EAAIH,QAAUA,SACP5B,EAAmB5B,GAC1BkD,EAAQY,WAAWC,YAAYb,GAC/BX,EAAOoB,IAERT,EAAQV,KAAOC,EAEf,IAAIuB,EAAOrB,SAASC,qBAAqB,QAAQ,GACjDoB,EAAKC,YAAYf,MACfgB,MAAK,WACPtC,EAAmB5B,GAAW,MAMhC,IAAImE,EAAqBxD,EAAgBX,GACzC,GAA0B,IAAvBmE,EAGF,GAAGA,EACFhC,EAASvB,KAAKuD,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAI/B,SAAQ,SAASC,EAASC,GAC3C4B,EAAqBxD,EAAgBX,GAAW,CAACsC,EAASC,MAE3DJ,EAASvB,KAAKuD,EAAmB,GAAKC,GAGtC,IACIC,EADAC,EAAS3B,SAASQ,cAAc,UAGpCmB,EAAOC,QAAU,QACjBD,EAAOE,QAAU,IACb/C,EAAoBgD,IACvBH,EAAOI,aAAa,QAASjD,EAAoBgD,IAElDH,EAAOZ,IAAM7B,EAAe7B,GAG5B,IAAI2E,EAAQ,IAAIf,MAChBS,EAAmB,SAAUd,GAE5Be,EAAOhB,QAAUgB,EAAOjB,OAAS,KACjCuB,aAAaJ,GACb,IAAIK,EAAQlE,EAAgBX,GAC5B,GAAa,IAAV6E,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYvB,IAAyB,SAAfA,EAAMH,KAAkB,UAAYG,EAAMH,MAChE2B,EAAUxB,GAASA,EAAME,QAAUF,EAAME,OAAOC,IACpDiB,EAAMK,QAAU,iBAAmBhF,EAAU,cAAgB8E,EAAY,KAAOC,EAAU,IAC1FJ,EAAMM,KAAO,iBACbN,EAAMvB,KAAO0B,EACbH,EAAMnB,QAAUuB,EAChBF,EAAM,GAAGF,GAEVhE,EAAgBX,QAAWkF,IAG7B,IAAIV,EAAUW,YAAW,WACxBd,EAAiB,CAAEjB,KAAM,UAAWK,OAAQa,MAC1C,MACHA,EAAOhB,QAAUgB,EAAOjB,OAASgB,EACjC1B,SAASqB,KAAKC,YAAYK,GAG5B,OAAOjC,QAAQ+C,IAAIjD,IAIpBV,EAAoB4D,EAAIxE,EAGxBY,EAAoB6D,EAAI3D,EAGxBF,EAAoB8D,EAAI,SAASxD,EAASkD,EAAMO,GAC3C/D,EAAoBgE,EAAE1D,EAASkD,IAClC1E,OAAOmF,eAAe3D,EAASkD,EAAM,CAAEU,YAAY,EAAMC,IAAKJ,KAKhE/D,EAAoBoE,EAAI,SAAS9D,GACX,qBAAX+D,QAA0BA,OAAOC,aAC1CxF,OAAOmF,eAAe3D,EAAS+D,OAAOC,YAAa,CAAEC,MAAO,WAE7DzF,OAAOmF,eAAe3D,EAAS,aAAc,CAAEiE,OAAO,KAQvDvE,EAAoBwE,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvE,EAAoBuE,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7F,OAAO8F,OAAO,MAGvB,GAFA5E,EAAoBoE,EAAEO,GACtB7F,OAAOmF,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvE,EAAoB8D,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3E,EAAoB+E,EAAI,SAASxE,GAChC,IAAIwD,EAASxD,GAAUA,EAAOmE,WAC7B,WAAwB,OAAOnE,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAP,EAAoB8D,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/D,EAAoBgE,EAAI,SAASgB,EAAQC,GAAY,OAAOnG,OAAOC,UAAUC,eAAeC,KAAK+F,EAAQC,IAGzGjF,EAAoBK,EAAI,GAGxBL,EAAoBkF,GAAK,SAAShD,GAA2B,MAApBiD,QAAQjC,MAAMhB,GAAYA,GAEnE,IAAIkD,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAWjG,KAAK2F,KAAKM,GAC5CA,EAAWjG,KAAOf,EAClBgH,EAAaA,EAAWG,QACxB,IAAI,IAAI5G,EAAI,EAAGA,EAAIyG,EAAWvG,OAAQF,IAAKP,EAAqBgH,EAAWzG,IAC3E,IAAIU,EAAsBiG,EAI1B/F,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,gECvQT,SAAS+F,EAAaC,GACpB,OAAOA,EAAIC,MAAM,iC,oBAHnBnF,EAAOD,QAAUkF,G,uBCcjB,SAASG,EAAYC,EAAIC,EAASC,GAChCF,EAAGG,cAAcH,EAAGI,SAAWF,GAC/BF,EAAGD,YAAYC,EAAGK,WAAYJ,GAGhC,SAASK,EAAcN,EAAIO,GACzB,IAAIN,EAAUD,EAAGM,gBACbE,EAAQ,EACRC,EAAiBT,EAAGU,KACpBC,EAAYX,EAAGU,KACfE,EAAUZ,EAAGa,cAQjB,OAPAb,EAAGD,YAAYC,EAAGK,WAAYJ,GAC9BD,EAAGc,WAAWd,EAAGK,WAAYG,EAAOC,EAAgBE,EAAWC,EAASL,GAExEP,EAAGe,cAAcf,EAAGK,WAAYL,EAAGgB,eAAgBhB,EAAGiB,eACtDjB,EAAGe,cAAcf,EAAGK,WAAYL,EAAGkB,eAAgBlB,EAAGiB,eACtDjB,EAAGe,cAAcf,EAAGK,WAAYL,EAAGmB,mBAAoBnB,EAAGoB,QAEnDnB,EAGT,SAASoB,EAAarB,EAAIvH,GACxB,IAAI6I,EAAStB,EAAGqB,eAGhB,OAFArB,EAAGuB,WAAWvB,EAAGwB,aAAcF,GAC/BtB,EAAGyB,WAAWzB,EAAGwB,aAAc/I,EAAMuH,EAAG0B,aACjCJ,EAGT,SAASK,EAAc3B,EAAIsB,EAAQM,EAAWC,GAC5C7B,EAAGuB,WAAWvB,EAAGwB,aAAcF,GAC/BtB,EAAG8B,wBAAwBF,GAC3B5B,EAAG+B,oBAAoBH,EAAWC,EAAe7B,EAAGgC,OAAO,EAAO,EAAG,GAGvE,SAASC,EAAcjC,EAAIkC,EAAcC,GACvC,IAAIC,EAAUpC,EAAGiC,gBAEbI,EAAeC,EAAatC,EAAIA,EAAGuC,cAAeL,GAClDM,EAAiBF,EAAatC,EAAIA,EAAGyC,gBAAiBN,GAM1D,GAJAnC,EAAG0C,aAAaN,EAASC,GACzBrC,EAAG0C,aAAaN,EAASI,GAEzBxC,EAAG2C,YAAYP,IACVpC,EAAG4C,oBAAoBR,EAASpC,EAAG6C,aACpC,MAAM,IAAItG,MAAMyD,EAAG8C,kBAAkBV,IAGzC,IAMIrJ,EANAgK,EAAU,CACZX,QAASA,EACTY,OAAQA,GAGNC,EAAgBjD,EAAG4C,oBAAoBR,EAASpC,EAAGkD,mBAEvD,IAAKnK,EAAI,EAAGA,EAAIkK,EAAelK,IAAK,CAClC,IAAI6I,EAAY5B,EAAGmD,gBAAgBf,EAASrJ,GAC5CgK,EAAQnB,EAAUhE,MAAQoC,EAAGoD,kBAAkBhB,EAASR,EAAUhE,MAEpE,IAAIyF,EAAcrD,EAAG4C,oBAAoBR,EAASpC,EAAGsD,iBACrD,IAAKvK,EAAI,EAAGA,EAAIsK,EAAatK,IAAK,CAChC,IAAIwK,EAAUvD,EAAGwD,iBAAiBpB,EAASrJ,GAC3CgK,EAAQQ,EAAQ3F,MAAQoC,EAAGyD,mBAAmBrB,EAASmB,EAAQ3F,MAGjE,OAAOmF,EAEP,SAASC,IACPhD,EAAG0D,cAActB,IAIrB,SAASE,EAAatC,EAAIjE,EAAM4H,GAC9B,IAAIC,EAAS5D,EAAGsC,aAAavG,GAI7B,GAHAiE,EAAG6D,aAAaD,EAAQD,GAExB3D,EAAG8D,cAAcF,IACZ5D,EAAG+D,mBAAmBH,EAAQ5D,EAAGgE,gBAClC,MAAM,IAAIzH,MAAMyD,EAAGiE,iBAAiBL,IAGxC,OAAOA,E,oBA1FTjJ,EAAOD,QAAU,CACfqF,YAAaA,EACbsB,aAAcA,EACdM,cAAeA,EACfM,cAAeA,EACfK,aAAcA,EACdhC,cAAeA,I,qBCZjB3F,EAAOD,QAAU,WACf,OAAO+E,OAAOyE,WAAa,M,iCCD7B,IAAIC,EAAiBC,EAAQ,QACzBC,EAASD,EAAQ,QACfE,EAAWF,EAAQ,QAoBzB,SAASG,IACP,IAAMC,EAAUF,EAASG,OAAS,KAAO,UAEzC,mvBAuBAD,EAvBA,yOAgCAH,EAhCA,aAiCAC,EAASG,OAAS,GAAKC,IAjCvB,aAkCAP,EAlCA,MAsCF,SAASO,IAEP,2jBA7DF/J,EAAOD,QAAU,SAAyBiK,GACxC,IAAMC,EAASN,EAASG,OAAS,cAAgB,eAC7CjC,EAAiB,GAAH,OAAM8B,EAASG,OAAS,kBAAoB,GAA5C,qCAElBF,IAFkB,aAGlBI,EAHkB,aAIlBL,EAASG,OAAS,wBAA0B,GAJ1B,6EAQhBG,EARgB,2DAWpB,OAAOpC,GAGP7H,EAAOD,QAAQ6J,gBAAkBA,G,qSCdjC,IAAIM,EAAcT,EAAQ,QACtBU,EAAwBV,EAAQ,QAChCW,EAAMX,EAAQ,QACdY,EAAOZ,EAAQ,QACfa,EAAgBb,EAAQ,QACxBc,EAAsBd,EAAQ,QAC9BE,EAAWF,EAAQ,QACjBe,EAAQf,EAAQ,QAElBgB,EAAoB,KAIxB,SAASC,EAAUC,GACjB,IAIIC,EAJAvF,EAAKmF,EAAMG,GACf,IAAKtF,EAAI,MAAM,IAAIzD,MAAM,0BAKzB,IAAIiJ,EAAS,CAACC,SAAU,EAAGC,SAAU,EAAGC,OAAQ,EAAGC,OAAQ,GAEvDC,EAAqB,EACrBC,EAAc,CAACC,MAAO,EAAGC,KAAM,EAAGC,MAAO,EAAGC,SAAU,GAGtDC,EAAiB,CAACC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACjCC,EAAajB,EAAOkB,YACpBC,EAAcnB,EAAOoB,aAIrBC,EAAU9B,EAAY7E,EAAGsF,OAAQ,CACnCsB,WAAY,CACVC,iBACAC,SAFU,WAEG,OAAO9G,EAAGsF,WAI3ByB,IAIA,IAUIC,EAEAC,EAZAC,GAAoB,EACpBC,GAAyB,EACzBC,GAAqB,EAKrBC,EAAmB,IAAIC,KAS3BC,IAEA,IAMIC,EAAeC,EANf7D,EAASqB,EAAcX,EAASoD,WAEpC1H,EAAG2H,OAAO3H,EAAG4H,OACb5H,EAAG6H,UAAU7H,EAAG8H,UAAW9H,EAAG+H,qBAE9B/H,EAAGgI,WAAW,EAAG,EAAG,EAAG,GAGvB,IAAIC,EAAgB/C,EAAoBlF,GAGpCkI,EAAQ,CACVC,UAAU,EAIVC,gBAAiBtD,EAAsBuD,GACvCJ,gBACAK,aACAC,4BACAC,WAMF,OAFA/I,OAAOgJ,MAAQP,EAERA,EAEP,SAASQ,IAEP1I,EAAG2I,MAAM3I,EAAG4I,iBAAmB5I,EAAG6I,kBAClC7B,EAAqB,EACrB8B,IACAjD,GAAsB,EACtBkD,IAGF,SAASD,IACP9I,EAAGgJ,WAAWxB,EAAcpF,SAExB8E,IACFA,GAAoB,EACpBlH,EAAGiJ,SAAS,EAAG,EAAG1C,EAAYE,GAC9BzG,EAAGkJ,UAAU1B,EAAc2B,YAAa5C,EAAYE,IAGlDU,IACFA,GAAyB,EACzBnH,EAAGoJ,UAAU5B,EAAc6B,WAAYlD,EAAeC,EAAGD,EAAeE,EAAGF,EAAeG,IAG5F2B,EAAcqB,OAAO9B,EAAe3B,GAEpC,IAAI0D,EAAQ9J,OAAO+J,YAAYC,MAAQlE,EACvCvF,EAAG0J,UAAUlC,EAAc+B,MAAOA,EAAM,KACxCvJ,EAAG0J,UAAUlC,EAAcmC,OAAQ9D,GACnC7F,EAAG4J,UAAUpC,EAAcqC,OAAQrE,EAAOC,SAAUD,EAAOE,SAAUF,EAAOG,OAAQH,EAAOI,QACvFwB,IACFA,GAAqB,EACrBpH,EAAG4J,UAAUpC,EAAcsC,aAAchE,EAAYC,MAAOD,EAAYE,KAAMF,EAAYG,MAAOH,EAAYI,WAE/GlG,EAAG+J,WAAW/J,EAAGgK,UAAW,EAAG,GAGjC,SAASjB,IACH/B,IACJA,EAAqBiD,sBAAsBvB,IAG7C,SAASL,EAAW6B,GAGlB,IAAIC,EAAgBnF,EAAK/C,cAAcjC,EAAI4D,EAAOvB,aAAc6H,EAAa1N,MAIzEgL,GAAeA,EAAcxE,SAGjCuC,EAAY9F,OAAO+J,YAAYC,MAC/BjC,EAAgB2C,EAEhB1C,EAAazC,EAAK3D,aAAarB,EAAI,IAAIoK,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KACtFpF,EAAKrD,cAAc3B,EAAIyH,EAAYD,EAAc6C,MAAO,GAExDnD,GAAoB,EACpBC,GAAyB,EAEzB4B,IAEAhE,EAAIuF,KAAK,cAAe7K,OAAOgJ,OAKjC,SAASH,IACP3B,EAAQ4D,cAAc,CACpBC,KAAM,EAAGC,MAAOhL,OAAOyE,WACvBwG,IAAK,EAAGC,OAAQlL,OAAOmL,cAGzB/D,EAAeF,EAAQkE,gBAGzB,SAAShE,EAAeiE,GACtB,IAAIC,EAAKD,EAAa1E,EAAEG,EACpByE,EAAKF,EAAazE,EAAEI,EACpBwE,EAAQH,EAAaG,MAEzB9E,EAAeC,EAAI2E,EACnB5E,EAAeE,EAAI2E,EACnB7E,EAAeG,EAAI2E,EACnB9D,GAAyB,EACzB7C,EAAS4G,cAAcH,EAAIC,EAAIC,GAC/BlC,IAGF,SAAShC,IACP,IAAIoE,EAAO7G,EAAS8G,oBAAoB7E,EAAYE,GAChD0E,GAAMxE,EAAQ4D,cAAcY,GAGlC,SAASE,IACP,IAAI5B,EAAM,IAAInC,KACVmC,EAAMpC,EAAmBjC,IAAmB8C,EAAMC,UAAW,GAGnE,SAASI,EAA0B+C,GAC5BA,EAIOrE,IACVA,EAAuBsE,YAAYF,EAAsB,OAJzDG,cAAcvE,GACdA,GAAuB,EACvBiB,EAAMC,UAAW,GAMrB,SAASsD,IAGPpE,EAAmB,IAAIC,KACvBY,EAAMC,UAAW,EAGnB,SAASK,IACP7B,EAAQ6B,UAER/I,OAAOiM,oBAAoB,SAAUC,GACrClM,OAAOiM,oBAAoB,YAAaE,GAAa,GACrDnM,OAAOiM,oBAAoB,YAAaG,GAAc,GACtDpM,OAAOiM,oBAAoB,aAAcI,GAAc,GACvDrM,OAAOiM,oBAAoB,YAAaK,GAAa,GACrDtM,OAAOiM,oBAAoB,UAAWD,GAAU,GAChDhM,OAAOiM,oBAAoB,oBAAqBM,GAAqB,GAErEC,qBAAqBjF,GACrBuB,GAA0B,GAC1BvB,EAAqB,EAGvB,SAASO,IACP9H,OAAOyM,iBAAiB,SAAUP,GAClClM,OAAOyM,iBAAiB,YAAaN,GAAa,GAClDnM,OAAOyM,iBAAiB,YAAaL,GAAc,GACnDpM,OAAOyM,iBAAiB,aAAcJ,GAAc,GACpDrM,OAAOyM,iBAAiB,YAAaH,GAAa,GAClDtM,OAAOyM,iBAAiB,UAAWT,GAAU,GAC7ChM,OAAOyM,iBAAiB,oBAAqBF,GAAqB,GAG9D1H,EAAS6H,WAAW5D,GAA0B,GAGpD,SAASuD,EAAajR,GACpB4Q,IACA,IAAIW,EAAavR,EAAEwR,QAAQ,GACtBD,IAELE,EAASF,EAAWG,QAASH,EAAWI,SACxCC,EAASL,EAAWG,QAASH,EAAWI,UAG1C,SAASR,EAAoBnR,GAC3BuM,GAAqB,EACrBtB,EAAYI,SAAWrL,EAAEqL,SACzBJ,EAAYC,MAAQ2G,KAAKC,GAAK9R,EAAEkL,MAAQ,IACxCD,EAAYE,KAAO0G,KAAKC,GAAK9R,EAAEmL,KAAO,IACtCF,EAAYG,MAAQyG,KAAKC,GAAK9R,EAAEoL,MAAQ,IAG1C,SAAS8F,EAAYlR,GACnB4Q,IACA,IAAIW,EAAavR,EAAEwR,QAAQ,GACtBD,GACLK,EAASL,EAAWG,QAASH,EAAWI,SAG1C,SAASZ,EAAY/Q,GAAK4R,EAAS5R,EAAE0R,QAAS1R,EAAE2R,SAAUf,IAE1D,SAASI,EAAahR,GAAKyR,EAASzR,EAAE0R,QAAS1R,EAAE2R,SAAUf,IAE3D,SAASgB,EAASG,EAAIC,GACpBrH,EAAOC,SAAWmH,EAClBpH,EAAOE,SAAWmH,EAGpB,SAASP,EAASM,EAAIC,GACpBrH,EAAOG,OAASiH,EAChBpH,EAAOI,OAASiH,EAGlB,SAASlB,IACPmB,EAAarN,OAAOyE,WAAYzE,OAAOmL,aAGzC,SAASkC,EAAaC,EAAOC,GAC3B1H,EAAOyH,MAAQA,EACfzH,EAAO0H,OAASA,EAChBzG,EAAawG,EACbtG,EAAcuG,EAEdjG,IACAG,GAAoB,EACpB6B,KAjRJpO,EAAOD,QAAU2K,G,+BCjBjB1K,EAAOD,QAAUuK,EAEjB,IAAMX,EAAWF,EAAQ,QACrB6I,EAAkB7I,EAAQ,QAE9B,SAASa,EAAcN,GACrB,IAAM/C,EAAY0C,EAASG,OAAS,KAAO,YACrCD,EAAUF,EAASG,OAAS,MAAQ,UAC1C,MAAO,CACLjC,eAAgByK,EAAgBtI,GAChCtC,aAAc,GAAF,OAAKiC,EAASG,OAAS,kBAAoB,GAA3C,gUAWd7C,EAXc,yBAYd4C,EAZc,6BAadA,EAbc,sP,yCCLhB7J,EAAOD,QAAU,SAAiBmF,EAAKqN,GAGrC,OAFKA,IAASA,EAAU,IAEjB,IAAIlS,QAAQmS,GAEnB,SAASA,EAASlS,EAASC,GACzB,IAAIkS,EAAM,IAAIC,eAgBd,SAASC,EAAezS,GAClBA,EAAE0S,kBACJL,EAAQM,SAAS,CACfC,OAAQ5S,EAAE4S,OACVC,MAAO7S,EAAE6S,MACTC,QAAS9S,EAAE4S,OAAS5S,EAAE6S,QAK5B,SAASE,IACP,GAAmB,MAAfR,EAAIS,OAAR,CAQA,IAAIC,EAAWV,EAAIU,SAEU,SAAzBZ,EAAQa,cAA+C,kBAAbD,IAE5CA,EAAWE,KAAKC,MAAMH,IAGxB7S,EAAQ6S,QAdN5S,EAAO,CACLoB,IAAK,0BAAF,OAA4B8Q,EAAIS,OAAhC,yBAAuDhO,GAC1DiO,SAAUV,EAAIU,SACdD,OAAQT,EAAIS,SAclB,SAASK,IACPhT,EAAO,sBAAD,OAAuB2E,IAG/B,SAASsO,IACPjT,EAAO,yBAAD,OAA0B2E,IAhDF,oBAArBqN,EAAQM,UACjBJ,EAAIlB,iBAAiB,WAAYoB,GAAgB,GAGnDF,EAAIlB,iBAAiB,OAAQ0B,GAAkB,GAC/CR,EAAIlB,iBAAiB,QAASgC,GAAgB,GAC9Cd,EAAIlB,iBAAiB,QAASiC,GAAkB,GAEhDf,EAAIgB,KAAK,MAAOvO,GACZqN,EAAQa,eACVX,EAAIW,aAAeb,EAAQa,cAE7BX,EAAIiB,KAAK,S,6FCzBb,IAAIlS,EAAUiI,EAAQ,QAetB,SAASkK,EAAmBC,EAAKC,GAC/B,IAAIC,EAAYT,KAAKC,MAAMM,GACvBG,EAAWF,EAAMvV,OAAS,GAAKuV,EAAM,GACpCE,IAEHA,EAAWxV,OAAOyV,KAAKF,EAAUG,OAAOC,QAAO,SAAAzI,GAAC,OAAIA,EAAEtG,MAAM,cAAY,IAE1E,IAAIgP,EAAOL,EAAUG,MAAMF,GAC3B,IAAKI,EAAM,MAAM,IAAIvS,MAAM,qBAAuBiS,EAAM,GAAK,IAAME,GAEnE,OAAOI,EAAKC,QAvBdpU,EAAOD,QAAU,SAAmBsU,GAClC,IAAIR,EAAQQ,EAAUC,MAAM,KAC5B,OAAO9S,EAAQ,gCAAD,OAAiCqS,EAAM,KACpD3R,MAAK,SAAA0R,GAAG,OAAID,EAAmBC,EAAKC,MACpCU,OAAM,SAAA5S,GACL,GAAIA,GAAOA,EAAIwR,UAAYxR,EAAIwR,SAAShO,MAAM,cAE5C,OAAO3D,EAAQ,yCAAD,OAA0CqS,EAAM,KAC3D3R,MAAK,SAAA0R,GAAG,OAAID,EAAmBC,EAAKC,W,uBCV7C,IAAIzJ,EAAMX,EAAQ,QACdE,EAAWF,EAAQ,QACnB+K,EAA0B/K,EAAQ,QAStCzJ,EAAOD,QAAU,SAA+B2N,GAC9CtD,EAAIqK,GAAG,oBAAqBC,GAC5B,IAOInF,EAPAoF,EAAuB,EAGvBC,EAAoBjL,EAASoD,UAMjC8H,IAEA,IAAIC,EAAM,CACR/H,UACAgI,UACAlH,UAGAhM,KAAM+S,EACNjS,MAAO,GACPqS,YAAa,GACbC,cAAc,GAGhB,OAAOH,EAEP,SAASjH,IACPzD,EAAI8K,IAAI,oBAAqBR,GAG/B,SAAS3H,IACP,OAAOpD,EAASoD,UAGlB,SAASgI,EAAQI,GACXA,IAAeP,EAUnBQ,EAAcD,GAAYjT,MAAK,SAAC/C,GAC9B,IAAIA,EAAOkW,UAAX,CAEA,GAAIlW,GAAUA,EAAOwD,MAEnB,OADA2S,EAAgBnW,EAAOwD,OAChBxD,EAGTyV,EAAoBO,EACpBL,EAAIjT,KAAOsT,EACXxL,EAAS4L,SAASJ,OAjBd5F,GAAgBA,EAAa5M,OAE/B+R,IAmBN,SAASY,EAAgB/F,GACnBA,GAAgBA,EAAa5M,OAC/BmS,EAAInS,MAAQ4M,EAAa5M,MACzBmS,EAAIE,YAAczF,EAAayF,YAC/BF,EAAIG,aAAe1F,EAAa0F,eAEhCH,EAAInS,MAAQ,GACZmS,EAAIE,YAAc,GAClBF,EAAIG,cAAe,GAIvB,SAASJ,IACP,IAAIW,EAAgB7L,EAASoD,UACzByI,EACFJ,EAAcI,GAAetT,MAAK,SAAA/C,GAC3BA,EAAOwD,QAEZiC,QAAQjC,MAAM,2CAA4CxD,EAAOwD,OAEjEyS,EAAczL,EAAS8L,sBAIzBL,EAAczL,EAAS8L,kBAI3B,SAASf,EAAUgB,GACjB,OAAOlB,EAAwBkB,GAAcd,GAC1C1S,MAAK,SAAAyT,GAGJ,OAFApG,EAAeoG,EACfL,EAAgB/F,EAAa5M,OACtB4M,KAIb,SAAS6F,EAAcD,GACrBR,GAAwB,EACxB,IAAIiB,EAAkBjB,EAEtB,OAAOD,EAAUS,GAAYjT,MAAK,SAACqN,GACjC,GAAIqG,IAAoBjB,EAGtB,OAFApF,EAAa8F,WAAY,EAElB9F,EAGT,GAAIA,EAAa5M,MACf,OAAO4M,EAGT,IAEE,OADA7B,EAAW6B,GACJA,EACP,MAAOrP,GACP,MAAO,CACLyC,MAAO,CACLA,MAAOzC,EAAE8C,iB,+DC7HrB,IAAI0H,EAAYjB,EAAQ,QACpBE,EAAWF,EAAQ,QACnBW,EAAMX,EAAQ,QACZe,EAAQf,EAAQ,QAElBkB,EAAShK,SAASkV,eAAe,gBAUrC,SAASC,EAAcnL,GACrB,IAAIyH,EAAQtN,OAAOyE,WACf8I,EAASvN,OAAOmL,YACpBtF,EAAOyH,MAAQA,EACfzH,EAAO0H,OAAUA,EACjB,IAAIhN,EAAKmF,EAAMG,EAAQ,CAACoL,WAAW,IAE/B1Q,GACFP,OAAOkR,cAAe,EAClBrM,EAASsM,MAAOC,IACf9L,EAAIqK,GAAG,iBAAkByB,IAG9BpR,OAAOkR,cAAe,EAI1B,SAASE,IACP,IAAIpI,EAAQpD,EAAUC,GACtB7F,OAAOgJ,MAAQA,EA3BbnD,GAAQmL,EAAcnL,GAG1BlB,sCAEEA,EAAQ,SAFV,2B,qDCdA,IAgBI0M,EAAKC,EAhBLhM,EAAMX,EAAQ,QAKd4M,EAAa,CACfC,MADe,SACTzU,GACJ,MAAO,CACLA,OACA0U,IAAK,CACHC,WAAY,MAWpB/M,sCAEE,MAAmBA,EAAQ,QAAtBgN,EAAL,EAAKA,WACL,EAA0BhN,EAAQ,QAA3BG,EAAP,EAAOA,gBACD8M,EAASjN,EAAQ,QAGjBkN,EAAO,CAAC1T,KAAM,OAAQ2T,SAAUF,GAChCG,EAAS,CAAC5T,KAAM,SAAU2T,SAAUhN,KAC1CuM,EAAMM,EAAW,CAACE,EAAME,EAAQ,CAAC5T,KAAM,QAAS2T,SAAU,MAC1DT,EAAIW,QAAQC,SAAQ,SAAArX,GACH,UAAXA,EAAEuD,OAAkBmT,EAAc1W,MAIxC0K,EAAIuF,KAAK,sBAfX,0BAkBA3P,EAAOD,QAAU,SAAmB8B,GAClC,OAAIsU,GACFC,EAAYY,OAAS,KACrBZ,EAAYa,aAAe,KAC3Bb,EAAYQ,SAAW/U,EACvBsU,EAAIe,cACGf,GAGFE,EAAWC,MAAMzU,K,iKChD1B,IAAIsV,EAAY1N,EAAQ,QAEpB2N,EAAgB,YAChBC,EAAgB,WAChBC,EAAW,CAAEzV,KAAM,IAoBvB,SAAS0V,EAAkB1V,GACzB,IAAI2V,EAAU,GACVC,EAAQ5V,EAAKyS,MAAM,MACnBoD,EAAc,GACdC,EAAe,EACfC,EAAc,IAAIC,IAetB,OAbAJ,EAAMV,SAAQ,SAACe,EAAMC,GACnBJ,EAAeI,EACXD,GAAqB,MAAZA,EAAK,IAA0B,MAAZA,EAAK,IACnCJ,EAAY9Y,KAAK,IACjBoZ,EAAcF,KAEVF,EAAYK,KAAO,IACrBH,EAAOI,EAAeJ,IAExBJ,EAAY9Y,KAAKkZ,OAId,CACL/K,UACAyK,WAGF,SAASzK,IACP,OAAO2K,EAAYS,KAAK,MAG1B,SAASH,EAAcF,GACrB,GAAoC,IAAhCA,EAAKM,QAAQhB,GAAsB,CACrC,IAAIiB,EAAUP,EAAKQ,OAAOlB,EAAc9Y,QACpCia,EAAcZ,EAClBH,EAAQ5Y,KAAKuY,EAAUkB,GAASnW,MAAK,SAAAL,GACnC6V,EAAYa,GAAe1W,WAExB,GAAoC,IAAhCiW,EAAKM,QAAQf,GAAsB,CAC5C,IAAImB,EAAUV,EAAK3S,MAAM,+BACzByS,EAAYa,IAAID,EAAQ,GAAIA,EAAQ,KAIxC,SAASN,EAAeJ,GAKtB,OAHAF,EAAYb,SAAQ,SAAC2B,EAAapU,GAChCwT,EAAOA,EAAKa,QAAQ,IAAIC,OAAOtU,EAAK,KAAMoU,MAErCZ,GA3DX9X,EAAOD,QAAU,SAA0B8B,GACzC,IAAKA,EAAM,OAAO,IAAIxB,SAAQ,SAAAC,GAAO,OAAIA,EAAQgX,MAEjD,IAAIuB,EAActB,EAAkB1V,GACpC,OAAIgX,EAAYrB,QAAQlZ,OAAS,EACxB+B,QAAQ+C,IAAIyV,EAAYrB,SAAStV,MAAK,kBAAM2W,KAChDtE,OAAM,SAAA5R,GAAW,MAAO,CAACA,MAAO,CAACA,aAG/B,IAAItC,SAAQ,SAAAC,GAAO,OAAIA,EAAQuY,Q,+DCbxC,IAWIC,EA0BAC,EArCAC,EAAavP,EAAQ,QACrBW,EAAMX,EAAQ,QACdwP,EAAgBxP,EAAQ,QACxByP,EAAWzP,EAAQ,QAGnB0P,EAAKH,EAAW,GAAI,CAAEI,WAAW,IAEjCC,EAAc5P,EAAQ,QACtB6P,EAAcD,EAGdhF,EAAY8E,EAAGvV,IAAI,QACnByQ,EACF6E,EAAS7E,GAAWnS,MAAK,SAACL,GACxByX,EAAczX,EACd8H,EAASsM,OAAQ,EACjBtM,EAAS4P,cAAcC,UAAYC,IACnCrP,EAAIuF,KAAK,qBACR4E,OAAM,SAAA5S,GACPiD,QAAQjC,MAAMhB,GACd2X,EAAcD,EACd1P,EAAS4P,cAAcG,UAAY/X,EACnCgI,EAAS4P,cAAcC,WAAY,EACnC7P,EAASsM,OAAQ,EACjB7L,EAAIuF,KAAK,sBAGXmJ,GAAgB,EAEhBQ,EAAcH,EAAGvV,IAAI,OAASyV,GAShC,IAAI1P,EAAW,CACb4P,cAAe,CAIbC,UAAWC,IACXE,gBAAgB,EAChBD,UAAW,KACXE,cAAc,GAEhB9P,QAAQ,EAER+P,YAA8B3W,IAAtBiW,EAAGvV,IAAI,WACfqS,MAAO6C,EAIPvD,WAKA/D,UAKAzE,UAKA0I,iBAKAlF,gBAKAE,sBAGAqJ,aACAC,gBACAC,oBACAC,qBACAd,MAGEe,EAAQ,mBAAmBC,KAAKC,UAAUC,aAAevV,OAAOwV,SAEpE,SAASL,EAAmBzM,GACrB0M,IACLvQ,EAAS4P,cAAcK,aAAepM,GAGxC,SAASgE,IACP,OAAO8H,IAAgBD,EAGzB,SAASS,EAAWvU,EAAM7D,GACxByX,EAAGV,IAAI,IAAMlT,EAAM7D,GAGrB,SAASqY,EAAcxU,GACrB4T,EAAGoB,MAAM,IAAMhV,GAGjB,SAASyU,IAEP,IADA,IAAIQ,EAAS,GACLjV,EAAO,EAAGA,EAAO,IAAKA,EAAM,CAClC,IAAI7D,EAAMyX,EAAGvV,IAAI,IAAM2B,QACXrC,IAARxB,GAAmB8Y,EAAO5b,KAAK,CAAC2G,OAAM7D,QAG5C,OAAO8Y,EAGT,SAASjK,EAAcH,EAAIC,EAAIC,GACzByI,GACFnW,aAAamW,GAGfA,EAAsB5V,YAAW,WAC/B4V,EAAsB,EACtBI,EAAGV,IAAI,CAAErI,KAAIC,KAAGC,YACf,KAGL,SAASG,EAAoB7E,EAAYE,GACvC,IAAIsE,EAAK+I,EAAGvV,IAAI,MACZyM,EAAK8I,EAAGvV,IAAI,MACZ0M,EAAQ6I,EAAGvV,IAAI,SACnB,GAAM6W,OAAOC,SAAStK,IAAOqK,OAAOC,SAASrK,IAAOoK,OAAOC,SAASpK,GAEpE,MAAQ,CACNT,MAAOO,EAAKxE,EAAW0E,EACvBP,KAAMM,EAAKvE,EAAYwE,EACvBR,OAAQM,EAAKxE,EAAW0E,EAAQ1E,EAAW0E,EAC3CN,QAASK,EAAKvE,EAAYwE,EAAQxE,EAAYwE,GASlD,SAASvD,IAAY,OAAOuM,EAE5B,SAAS7D,IAAmB,OAAO4D,EAEnC,SAAS9D,EAAS1T,GACZA,EAAKvD,OAAS,KAChBqL,EAAS4P,cAAcI,gBAAiB,EACxCR,EAAGoB,MAAM,QAET5Q,EAAS4P,cAAcI,gBAAiB,EACxCR,EAAGV,IAAI,CAACkC,GAAI9Y,IACZsX,EAAGoB,MAAM,SAEXjB,EAAczX,EAGhB,SAAS4X,IACP,OAAOR,KAAmBzH,IAtB5B2H,EAAGyB,UAAS,WAEVxQ,EAAIuF,KAAK,cAAe7K,OAAOgJ,UAuBjC9N,EAAOD,QAAU4J,G,mBClLjB3J,EAAOD,QAAU,sR,iCCIjB,IAAM8a,EAAYpR,EAAQ,QACtBqR,EAAcrR,EAAQ,QACtB6I,EAAkB7I,EAAQ,QACxBE,EAAWF,EAAQ,QA4BzB,SAASsR,EAAYxE,GACnB,IAAIyE,EAAOzE,EAAI0E,YAAY,GAEvBC,EAAaF,EAAKG,MAClBC,EAAaF,EAAWE,aACxBpS,EAASkS,EAAWlS,OACpBqS,EAASrS,EAAOiO,aAAamE,EAAWtD,MACxCA,EAAO9O,EAAO4N,SAAS0B,OAAO+C,EAASD,EAAWE,QACtDxD,GAAQ9O,EAAO4N,SAAS2E,UAAUL,EAAWM,MAAON,EAAWO,KAC/D,IAAIC,EAAS,QAAUN,EAAWtD,KAAO,KACrC6D,EAAWX,EAAKY,KACpB,MAAO,CACLjZ,MACE+Y,EAAS5D,EAAO,KAChB+D,EAAWH,EAAOpd,QAAUud,EAAWT,EAAWE,QAAU,IAC9DtG,YAAa2G,EACb1G,aAAcA,EAAa0G,IAI/B,SAAS1G,EAAa0G,GACpB,OAAOA,EAASvD,QAAQ,UAAY,GAClCuD,EAASvD,QAAQ,YAAe,EAGpC,SAASyD,EAAWvd,GAClB,OAAO,IAAIwd,MAAMxd,EAAS,GAAG6Z,KAAK,KA9CpCnY,EAAOD,QAAU,SAAiCoV,GAChD,IAAI4G,EAAazJ,EAAgB6C,GAEjC,OAAO2F,EAAYiB,GAAY7Z,MAAK,SAAA8Z,GAClC,GAAIA,EAAkBrZ,MACpB,OAAOqZ,EAGT,IAAIC,EAAaD,EAAkBjP,UAE/BwC,EAAesL,EAAUoB,GAM7B,OALA1M,EAAa1N,KAAOoa,EACpB1M,EAAavF,KAAOmL,EAEhB5F,EAAagH,IAAIC,aAAe7M,EAASG,SAAQyF,EAAa5M,MAAQoY,EAAYxL,EAAagH,MAE5FhH,O,2HC/BX,IAAI2M,EAAYzS,EAAQ,QACpB0S,EAAU1S,EAAQ,QAClBE,EAAWF,EAAQ,QACnB2S,EAAa3S,EAAQ,QACrBxE,EAAewE,EAAQ,QAoH3B,SAAS4S,EAAWrY,EAAOqB,EAAIE,GAC7B,IACID,EAAS8M,EAAOC,EADhBiK,GAAe,EAEfC,EAAc,WAAahX,EAC3BiX,EAAUD,EAAc,MAExBzH,EAAMvW,OAAOke,OAAO,CACtBC,KAAM,QACNnX,OACAoX,OACA9O,UACAc,WAGF,OAAOmG,EAEP,SAASnG,EAAOlH,GACTnC,IAEDgX,IACFA,GAAe,GAEjBjX,EAAGG,cAAcH,EAAGI,SAAWF,GAC/BF,EAAGD,YAAYC,EAAGK,WAAYJ,GAE9BD,EAAGuX,UAAUnV,EAAQ8U,GAAchX,GACnCF,EAAGkJ,UAAU9G,EAAQ+U,GAAUpK,EAAOC,IAGxC,SAASxE,IACHvI,IACFD,EAAGwX,cAAcvX,GACjBA,EAAU,MAId,SAASqX,IACP,OAAOT,EAAUlY,GAAO9B,MAAK,SAAA0D,GAI3B,OAHAN,EAAU6W,EAAQxW,cAAcN,EAAIO,GACpCwM,EAAQxM,EAAMwM,MACdC,EAASzM,EAAMyM,OACRyC,MAKb,SAASgI,EAAwBC,EAAKC,GACpC,IAAK,IAAI5e,EAAI,EAAGA,EAAI2e,EAAIze,SAAUF,EAChC,GAAI2e,EAAI3e,GAAGmH,OAASyX,EAAW,OAAO5e,EAGxC,OAAQ,EArKV4B,EAAOD,QAAU,SAAUsF,GACzB,IAAI4X,EAAa,IAAIC,IACjBC,EAAkB,EAGlBC,EAAa,GACbC,EAAS,GACTvI,EAAM,CACRwI,KAAMF,EACNrD,gBACAD,aACAnL,UAKF,OAFA4O,IAEOzI,EAEP,SAASyI,IACP,IAAIC,EAAiB7T,EAASqQ,oBACzBwD,GACLA,EAAezG,SAAQ,SAAA0G,GACrB3D,EAAW2D,EAAY/b,IAAK+b,EAAYlY,SAI5C,SAASoJ,EAAOlH,EAASiW,GACvB,IAAK,IAAItf,EAAI,EAAGA,EAAIif,EAAO/e,SAAUF,EACnCif,EAAOjf,GAAGuQ,OAAOlH,EAASiW,GAI9B,SAAS3D,EAAc4D,GACrB,IAAKV,EAAWW,IAAID,EAAQpY,MAAO,MAAM,IAAI3D,MAAM,uDAEnD,IAAIic,EAAaf,EAAwBO,EAAQM,EAAQpY,MACzD,IAAoB,IAAhBsY,EAAmB,MAAM,IAAIjc,MAAM,uDAEvCyb,EAAOQ,GAAYhQ,UACnBwP,EAAO7d,OAAOqe,EAAY,GAE1B,IAAIC,EAAiBhB,EAAwBM,EAAYO,EAAQpY,MACjE6X,EAAW5d,OAAOse,EAAgB,GAClCb,EAAWc,OAAOJ,EAAQpY,MAC1BoE,EAASoQ,cAAc4D,EAAQpY,MAG/B,IAAIyY,GAAW,EACfX,EAAOtG,SAAQ,SAAA1T,GACE,UAAXA,EAAEqZ,OAAkBsB,GAAW,MAErCrU,EAASsQ,mBAAmB+D,GAG9B,SAASlE,EAAWpY,EAAK6D,GACvB,GAAmB,kBAAR7D,EAAkB,MAAM,IAAIE,MAAM,gBAG7C,GAAIqb,EAAWW,IAAIrY,GAAO,MAAM,IAAI3D,MAAM,iCAM1C,QAHasB,IAATqC,IAAoBA,EAAO0Y,UAGlB/a,IAATqC,EAAoB,MAAM,IAAI3D,MAAM,yBAIxC,IAAIsc,EAWJ,GAVIjZ,EAAavD,IAGNA,EAAIyD,MAAM,WAFnB+Y,EAAQ9B,EAAW1a,EAAK2D,EAAIE,GAC5BoE,EAASsQ,oBAAmB,IAInBkE,EAAQzc,KACjBwc,EAAQ7B,EAAW3a,EAAK2D,EAAIE,KAGzB2Y,EAAO,MAAM,IAAItc,MAAM,mBAC5Byb,EAAOze,KAAKsf,GACZjB,EAAWmB,IAAI7Y,GAEf,IAAI8Y,EAAiB,CACnB3B,KAAMwB,EAAMxB,KACZzZ,KAAM,WAAF,OAAasC,GACjBA,OACA5C,MAAO,KACP4K,MAAO,UACP7L,IAAKA,EACL4c,MAAOJ,GAETd,EAAWxe,KAAKyf,GAChBH,EAAMvB,OAAOza,MAAK,WAChBmc,EAAe9Q,MAAQ,QACvB5D,EAASmQ,WAAWvU,EAAM7D,MACzB6S,OAAM,SAAA5S,GACP0c,EAAe9Q,MAAQ,QACvB8Q,EAAe1b,MAAQhB,KAI3B,SAASsc,IACP,IAAK,IAAI7f,EAAI,EAAGA,EAAI+e,IAAmB/e,EACrC,IAAK6e,EAAWW,IAAIxf,GAAI,OAAOA,EAInC,SAAS+f,IAEP,OAAO,K,uBCpHX,IAAIxU,EAAWF,EAAQ,QAEvBzJ,EAAOD,QAAU,SAAe4K,EAAQ4T,GACtC,IAAIlZ,EACJ,IACEA,EAAKsF,EAAO6T,WAAW,SAAUD,GAE7BlZ,IAAIsE,EAASG,QAAS,GAC1B,MAAOnI,GACPiD,QAAQjC,MAAM,+BAAgChB,GAC9C0D,EAAK,KAQP,OANKA,IAEHA,EAAKsF,EAAO6T,WAAW,SAAUD,IAC/B5T,EAAO6T,WAAW,qBAAsBD,IAGrClZ,I,mBClBTrF,EAAOD,QAAU,i6B,qBCEjB,SAASmc,EAAUxa,GACjB,IAAI+c,EAAcC,EAEd9Y,EAAQ,IAAI+Y,MAOhB,OANA/Y,EAAMgZ,YAAc,GAEpBhZ,EAAMvE,OAASwd,EACfjZ,EAAMtE,QAAUwd,EAChBlZ,EAAMlE,IAAMA,EAEL,IAAIrB,SAAQ,SAACC,EAASC,GAC3Bke,EAAene,EACfoe,EAAcne,KAGhB,SAASue,EAAYnd,GAAO+c,EAAY/c,GACxC,SAASkd,IAAgBJ,EAAa7Y,I,UAlBxC5F,EAAOD,QAAUmc,G,mBCAjBlc,EAAOD,QAAU,mvJ,+BCKjBC,EAAOD,QAAUgf,EAEjB,IAAIC,EAAY,mCAEhB,SAASD,EAAqBE,GAC5B,MAAkB,qBAAPC,GACA,IAAI7e,SAAQ,SAACC,EAASC,GACzB,IAAI4e,EAAQxe,SAASQ,cAAc,UACnCge,EAAMzc,aAAa,MAAO,mCAC1Byc,EAAM9d,OAASf,EACf6e,EAAM7d,QAAUf,EAChBI,SAASqB,KAAKC,YAAYkd,MAC3Bjd,MAAK,kBAAM6c,EAAqBE,MAGhC,IAAI5e,SAAQ,SAAC+e,EAAiBC,GACnCH,GAAGI,WAAW,CAACN,UAAWA,IAE1BE,GAAGtb,IAAI,WAAY,CAAEsB,IAAK+Z,IAAa,SAASM,GAC9C,GAAIA,EAAMC,OAAQ,CAEhB,IADA,IAAIC,EAAe,GACVrhB,EAAI,EAAGA,EAAImhB,EAAMC,OAAOlhB,OAAQF,IACvCqhB,GAAgBF,EAAMC,OAAOphB,GAAGshB,cAAgB,IAElDD,GAAgB,2FAChBJ,EAAcI,OACT,CACL,IAAIE,EACJ,GAAmB,aAAfJ,EAAM7C,KAAqB,CAC3B,IAAIkD,EAAsB,EAC1BD,EAAYJ,EAAMM,OAAOD,GAAqBE,WAAa,cAAgBd,OAE3EW,EAAYJ,EAAMO,WAAa,cAAgBd,EAEnDI,EAAgBO,Y,iUChCxB,IAAI1a,EAAewE,EAAQ,QACvBsV,EAAuBtV,EAAQ,QAC/BE,EAAWF,EAAQ,QAIvB,SAAS2S,EAAWpY,EAAOqB,EAAIE,GAC7B,IACIwa,EAGAC,EACAC,EAmBAC,EACAP,EAzBAQ,EAAU,KAEV5D,EAAc,WAAahX,EAC3BiX,EAAUD,EAAc,MAGxB6D,EAAgB,IAAIC,WAAWF,GAE/B9N,EAAS,EACTD,EAAQ,IAkBR0C,EAAMvW,OAAOke,OAAO,CACtBC,KAAM,QACNnX,OACAoX,OACA9O,UACAc,SACA2R,eAGF,OAAOxL,EAEP,SAAS6H,IACP,GAAI1X,EAAajB,GACf,OAAO+a,EAAqB/a,GACzB9B,MAAK,SAAAgD,GAAG,OAAIya,EAAYza,KACxBhD,MAAK,WACJ,GAAIyH,EAASkQ,OAAQ,CAEnB,IAAImG,EAASO,IACb,OAAOD,EAAWN,OAGnB,GAAIhc,EAAMmB,MAAM,UAAW,CAChCwa,EAAY3b,EAEZ,IAAIgc,EAASO,IACb,OAAOlgB,QAAQC,QAAQggB,EAAWN,IAEpC,MAAM,IAAIpe,MAAM,+CAGlB,SAAS0e,EAAWE,GAClBR,EAASQ,EACTR,EAAOpB,YAAc,YACrBoB,EAAOS,UAAW,EAElB,IAAIC,EAAW,IAAK5b,OAAO6b,cAAgB7b,OAAO8b,oBAClDX,EAAWS,EAASG,iBACpBZ,EAASE,QAAUA,EAEnB,IAAInX,EAAS0X,EAASI,yBAAyBd,GAC/ChX,EAAO+X,QAAQd,GACfA,EAASc,QAAQL,EAASM,aAE1Bd,EAAY,IAAIG,WAAWjO,EAAQC,EAAS,GAC5C0N,EAAepa,EAAcN,EAAGoB,OAAQyZ,EAAW9N,EAAOC,GAE1D2N,EAAOtd,aAAa,MAAOid,GAC3BK,EAAOiB,OAEPjB,EAAOjP,oBAAoB,QAASmQ,GACpClB,EAAOzO,iBAAiB,QAAS2P,GAEjClB,EAAOjP,oBAAoB,OAAQoQ,GACnCnB,EAAOzO,iBAAiB,OAAQ4P,GAEhCnB,EAAOjP,oBAAoB,QAASmQ,GACpClB,EAAOzO,iBAAiB,QAAS2P,GAGnC,SAASvb,EAAcuO,EAAQpW,EAAMsU,EAAOC,GAC1C,IAAI/M,EAAUD,EAAGM,gBASjB,OARAN,EAAGD,YAAYC,EAAGK,WAAYJ,GAC9BD,EAAGe,cAAcf,EAAGK,WAAYL,EAAGgB,eAAgBhB,EAAGiB,eACtDjB,EAAGe,cAAcf,EAAGK,WAAYL,EAAGkB,eAAgBlB,EAAGiB,eACtDjB,EAAGe,cAAcf,EAAGK,WAAYL,EAAGmB,mBAAoB0N,GACvD7O,EAAGe,cAAcf,EAAGK,WAAYL,EAAG+b,mBAAoBlN,GACnDpW,aAAgBuiB,YAChBhb,EAAGc,WAAWd,EAAGK,WAAY,EAAGL,EAAGU,KAAMqM,EAAOC,EAAQ,EAAGhN,EAAGU,KAAMV,EAAGa,cAAepI,GAEnFwH,EAGT,SAAS4b,KAGT,SAASC,KAGT,SAAStT,IACHkS,IACF1a,EAAGwX,cAAckD,GACjBA,EAAe,MAKnB,SAASpR,EAAOlH,EAASiW,GACvB,GAAKqC,EAAL,CAEAE,EAASoB,qBAAqBjB,GAS9B,IAPA,IAAIkB,EAAMnB,EAAQ,EAIdoB,EAAgB7D,EAAc,EAAK4D,EACnCE,GAAoB9D,EAAc,GAAK,EAAK4D,EAEvCljB,EAAI,EAAGA,EAAIkjB,IAAOljB,EAAG,CAC5B,IAAIqjB,EAA6B,GAAvBrjB,EAAIojB,GACVE,EAA6B,GAApBtjB,EAAImjB,GAEbI,EAAiBvB,EAAchiB,GAE/BwjB,EAAW1B,EAAUwB,EAAQ,GAC7BG,EAAU3B,EAAUwB,EAAQ,GAChCxB,EAAUuB,GAAME,EAChBzB,EAAUuB,EAAK,GAAgB,GAAXG,EAAkC,GAAjBD,EACrCzB,EAAUuB,EAAK,GAAe,GAAVI,EAAiC,GAAjBF,EAItC,IAAIG,EAAUP,EAAe,EAAID,EAC7BS,EAAaP,EAAkB,EAAIF,EAEvC,IAASljB,EAAI,EAAGA,EAAIkjB,EAAKljB,GAAK,EAAG,CAC/B,IAAI0B,GAAKsgB,EAAchiB,GAAKgiB,EAAchiB,EAAI,IAAI,EAC9C4jB,EAAiC,GAApB5jB,EAAE,EAAI2jB,GACnBE,EAA+B,GAAjB7jB,EAAE,EAAI0jB,GAEpBI,EAAchC,EAAU+B,EAAa,GACrCE,EAAajC,EAAU+B,EAAa,GAExC/B,EAAU8B,GAAaliB,EACvBogB,EAAU8B,EAAY,GAAyB,IAAnBE,EAAcpiB,GAC1CogB,EAAU8B,EAAY,GAAkB,GAAbG,EAAuB,GAAJriB,EAQhD,IAAIsiB,EAAUd,EAAI,EAClB,IAASljB,EAAI,EAAGA,EAAIkjB,EAAM,EAAGljB,GAAK,EAAG,CAC/B0B,EAA4E,IAAvEogB,EAA6B,GAAlB9hB,EAAI2jB,IAAmB7B,EAAiC,GAAtB9hB,EAAI2jB,EAAa,KACnEC,EAA2C,GAA9BI,EAAUhkB,EAAE,EAAI2jB,GAC7BE,EAAyC,GAA3BG,EAAUhkB,EAAE,EAAI0jB,GAE9BI,EAAchC,EAAU+B,EAAa,GACrCE,EAAajC,EAAU+B,EAAa,GAExC/B,EAAU8B,GAAaliB,EACvBogB,EAAU8B,EAAY,GAAyB,IAAnBE,EAAcpiB,GAC1CogB,EAAU8B,EAAY,GAAkB,GAAbG,EAAuB,GAAJriB,EAOhDuF,EAAGG,cAAcH,EAAGI,SAAWF,GAC/BF,EAAGD,YAAYC,EAAGK,WAAYqa,GAC9B1a,EAAGc,WAAWd,EAAGK,WAAY,EAAGL,EAAGU,KAAMqM,EAAOC,EAAQ,EAAGhN,EAAGU,KAAMV,EAAGa,cAAega,GACtF7a,EAAGuX,UAAUnV,EAAQ8U,GAAchX,GAEnCF,EAAGkJ,UAAU9G,EAAQ+U,GAAUwD,EAAOqC,YAAarC,EAAOsC,YAI9D,SAAS/B,IACP,IAAIC,EAAW7f,SAAS4hB,cAAc,SACtC,OAAI/B,IACJA,EAAW7f,SAASQ,cAAc,SAClCqf,EAASgC,SAAU,EACnBhC,EAASiC,YAAa,EACtBjC,EAASkC,UAAY,GAErBlC,EAASmC,MAAMC,WAAa,SAE5BjiB,SAASkiB,KAAK5gB,YAAYue,GACnBA,GA1MTxgB,EAAOD,QAAUqc,G,uECXjB,IAAI0G,EAAc,IAAIjL,IAClBrW,EAAUiI,EAAQ,QAEtBzJ,EAAOD,QAAU,SAAmBgjB,GAClC,IAAKA,EAAM,OAAO1iB,QAAQE,OAAO,gBACjC,IAAIyiB,EAAUD,EAAKE,OACnB,IAAKD,EAAS,OAAO3iB,QAAQE,OAAO,gBAEpC,IAAI2iB,EAAiBJ,EAAYlf,IAAIof,GACrC,OAAIE,EAAuB7iB,QAAQC,QAAQ4iB,GAEpC1hB,EAAQuhB,GAAM7gB,MAAK,SAAAL,GAExB,OADAihB,EAAYrK,IAAIsK,EAAMlhB,GACfA,O,qBCVX,IAAIshB,EAAW1Z,EAAQ,QAEvBzJ,EAAOD,QAAUojB,EAAS","file":"js/app.a9066da1.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2c26030c\":\"c06f40dd\",\"chunk-4949eea6\":\"97e1cc03\",\"chunk-447470f0\":\"8411385f\",\"chunk-59324178\":\"8bbcbce8\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-2c26030c\":1,\"chunk-447470f0\":1,\"chunk-59324178\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2c26030c\":\"60fa4cef\",\"chunk-4949eea6\":\"31d6cfe0\",\"chunk-447470f0\":\"be32b711\",\"chunk-59324178\":\"075c6641\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\nmodule.exports = isSoundCloud;\n\nfunction isSoundCloud(url) {\n  return url.match(/^https?:\\/\\/soundcloud\\.com\\//);\n}","// Based on https://github.com/mapbox/webgl-wind\n// Licensed under ISC License Copyright (c) 2016, Mapbox\n// https://github.com/mapbox/webgl-wind/blob/master/LICENSE\n\n// Adapted to my own needs here.\n\nmodule.exports = {\n  bindTexture: bindTexture,\n  createBuffer: createBuffer,\n  bindAttribute: bindAttribute,\n  createProgram: createProgram,\n  createShader: createShader,\n  createTexture: createTexture\n}\n\nfunction bindTexture(gl, texture, unit) {\n  gl.activeTexture(gl.TEXTURE0 + unit);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n}\n\nfunction createTexture(gl, image) {\n  var texture = gl.createTexture();\n  var level = 0;\n  var internalFormat = gl.RGBA;\n  var srcFormat = gl.RGBA;\n  var srcType = gl.UNSIGNED_BYTE;\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, image);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n  return texture;\n}\n\nfunction createBuffer(gl, data) {\n  var buffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n  return buffer;\n}\n\nfunction bindAttribute(gl, buffer, attribute, numComponents) {\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.enableVertexAttribArray(attribute);\n  gl.vertexAttribPointer(attribute, numComponents, gl.FLOAT, false, 0, 0);\n}\n\nfunction createProgram(gl, vertexSource, fragmentSource) {\n  var program = gl.createProgram();\n\n  var vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSource);\n  var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSource);\n\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n\n  gl.linkProgram(program);\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw new Error(gl.getProgramInfoLog(program));\n  }\n\n  var wrapper = {\n    program: program,\n    unload: unload\n  };\n\n  var numAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n  var i;\n  for (i = 0; i < numAttributes; i++) {\n    var attribute = gl.getActiveAttrib(program, i);\n    wrapper[attribute.name] = gl.getAttribLocation(program, attribute.name);\n  }\n  var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (i = 0; i < numUniforms; i++) {\n    var uniform = gl.getActiveUniform(program, i);\n    wrapper[uniform.name] = gl.getUniformLocation(program, uniform.name);\n  }\n\n  return wrapper; \n\n  function unload() {\n    gl.deleteProgram(program);\n  }\n}\n\nfunction createShader(gl, type, source) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      throw new Error(gl.getShaderInfoLog(shader));\n  }\n\n  return shader;\n}","module.exports = function isSmallScreen() {\n  return window.innerWidth < 600;\n}","var complexLibrary = require('./complex.glsl');\nvar bezier = require('./bezier.glsl');\nconst appState = require('../../appState');\n\nmodule.exports = function getFragmentCode(main) {\n  const output = appState.webgl2 ? 'outputColor' : 'gl_FragColor';\n  var fragmentShader = `${appState.webgl2 ? '#version 300 es' : ''}\nprecision highp float;\n${getSharedPrefix()}\n${main}\n${appState.webgl2 ? 'out vec4 outputColor;' : ''}\n\nvoid main() {\n  float ar = iResolution.x / iResolution.y;\n  ${output} = get_color(vec2(v_tex_pos.x * ar, v_tex_pos.y));\n}\n`;\nreturn fragmentShader;\n}\n\nmodule.exports.getSharedPrefix = getSharedPrefix;\n\nfunction getSharedPrefix() {\n  const varying = appState.webgl2 ? 'in' : 'varying';\n\n  return `uniform sampler2D iChannel0, iChannel1, iChannel2, iChannel3;\nuniform vec2 iChannel0Res, iChannel1Res, iChannel2Res, iChannel3Res;\n\n// Current frame number, counted from launch of the program\nuniform float iFrame;\n\n// How many seconds passed since program launch\nuniform float iTime;\n\n// Device orientation angles \\`alpha\\`, \\`beta\\`, \\`gamma\\` and \\`absolute\\`\nuniform vec4 iOrientation;\n\n// Mouse (or touch) coordinates. \\`.xy\\` - current, \\`.zw\\` - last clicked.\n// Note: To translate coordinates to scene coordinates use\n// \\`screen2scene(iMouse.xy)\\` method.\nuniform vec4 iMouse;\n\n// Screen resolution\nuniform vec2 iResolution;\n\n// Current scene transform (\\`transformX\\`, \\`transformY\\`, \\`transformZ\\`)\nuniform vec3 iTransform;\n\n${varying} vec2 v_tex_pos;\n\nvec2 screen2scene(vec2 pos) {\n  pos /= iResolution.xy;\n  float ar = (iResolution.x/iResolution.y);\n  vec2 vt = 2.*(pos - iTransform.xy)/iTransform.z;\n  return vec2(ar*(vt.x - 1.), 1. - vt.y);\n}\n\n${bezier}\n${appState.webgl2 ? '' : getHyperbolicFunctions()}\n${complexLibrary}\n`\n}\n\nfunction getHyperbolicFunctions() {\n  // These are supported in webgl2, but not in webgl1\n  return `\nfloat cosh(float val) {\n  float tmp = exp(val);\n  return (tmp + 1.0 / tmp) / 2.0;\n}\n \nfloat tanh(float val) {\n  float tmp = exp(val);\n  return (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);\n}\n \nfloat sinh(float val) {\n  float tmp = exp(val);\n  return (tmp - 1.0 / tmp) / 2.0;\n}\n\nvec2 cosh(vec2 val) {\n  vec2 tmp = exp(val);\n  return(tmp + 1.0 / tmp) / 2.0;\n}\n \nvec2 tanh(vec2 val) {\n  vec2 tmp = exp(val);\n  return (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);\n}\n \nvec2 sinh(vec2 val) {\n  vec2 tmp = exp(val);\n  return (tmp - 1.0 / tmp) / 2.0;\n}\n`\n}","/**\n * This is the main scene. It does not depend on vue application\n * and can be used as long as we have a canvas.\n * \n * Its main responsibility is to manage life cycle of the WebGL app\n */\nvar makePanzoom = require('panzoom');\nvar createShaderCodeState = require('./editor/shaderCodeState');\nvar bus = require('./bus');\nvar util = require('./util/gl-utils');\nvar createShaders = require('./util/createShaders');\nvar createChannelsState = require('./channelsState');\nvar appState = require('./appState');\nconst getGL = require('./getGL');\n\nvar HIDE_UI_THRESHOLD = 2500; // if nothing happens in this many milliseconds - hide ui\n\nmodule.exports = initScene;\n\nfunction initScene(canvas) {\n  var gl = getGL(canvas);\n  if (!gl) throw new Error('WebGL is not available');\n\n  // This is used to track seconds since application start time.\n  var startTime;\n  // Pass cursor to the shader as `iMouse`\n  var cursor = {currentX: 0, currentY: 0, clickX: 0, clickY: 0};\n  // Pass current frame number to shader as `iFrame`\n  var currentFrameNumber = 0;\n  var orientation = {alpha: 0, beta: 0, gamma: 0, absolute: 0};\n\n  // This will be updated by panzoom controller (see applyTransform)\n  var sceneTransform = {x: 0, y: 0, z: 1};\n  var sceneWidth = canvas.clientWidth;\n  var sceneHeight = canvas.clientHeight;\n\n  // Allow to pan and zoom the scene. The panzoom library\n  // manages user actions, and actual translation happens in the shader.\n  var panzoom = makePanzoom(gl.canvas, {\n    controller: {\n      applyTransform,\n      getOwner() { return gl.canvas; },\n    }\n  });\n\n  restorePanzoom(); // Let's load previous pan zoom state from query string\n\n  // Instead of blindly updating all gl properties, we queue them up\n  // and in the frame renderer we address changes.\n  var requestSizeUpdate = true;      // This means that screen size needs to be updated\n  var requestTransformUpdate = true; // And this means that transforms are dirty\n  var orientationChanged = true;\n\n  // This is used to auto-hide UI when there is no input. We only do this\n  // when code editor is closed, and there was no user activity in HIDE_UI_THRESHOLD ms.\n  // TODO: This can be refactored into vue app. No need for it to be here...\n  var lastActivityTime = new Date();\n\n  // Handle for the next requestAnimationFrame call.\n  var nextAnimationFrame;\n  // Handle of of the interval that \"auto-hides\" UI when app is inactive.\n  var lastActiveIntervalId;\n  \n  // We pass a few things to the shader (like mouse pose), and we need to update\n  // transforms when window changes. So, we listen to relevant events here.\n  listenToEvents();\n\n  var shader = createShaders(appState.getCode());\n\n  gl.enable(gl.BLEND);\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n  gl.clearColor(0, 0, 0, 1); // Not sure if I need this\n  var screenProgram, quadBuffer;\n\n  var channelsState = createChannelsState(gl);\n\n  // This is used by Vue app to communicate with the scene\n  var state = {\n    isActive: true,\n    // This is the main bit for the code. \n    // TODO: If someone wants to use scene independently, this needs to \n    // be less coupled with the application \n    codeEditorState: createShaderCodeState(updateCode),\n    channelsState,\n    goToOrigin,\n    setActivityMonitorEnabled,\n    dispose\n  };\n\n  // This is not very cool, okay?\n  window.scene = state;\n\n  return state; // That's it. The public part is over.\n\n  function animate() {\n    // TODO: Do I need this?\n    gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);\n    nextAnimationFrame = 0;\n    drawCurrentFrame();\n    currentFrameNumber += 1;\n    scheduleNextFrame();\n  }\n\n  function drawCurrentFrame() {\n    gl.useProgram(screenProgram.program); \n\n    if (requestSizeUpdate) {\n      requestSizeUpdate = false;\n      gl.viewport(0, 0, sceneWidth, sceneHeight);\n      gl.uniform2f(screenProgram.iResolution, sceneWidth, sceneHeight);\n    }\n\n    if (requestTransformUpdate) {\n      requestTransformUpdate = false;\n      gl.uniform3f(screenProgram.iTransform, sceneTransform.x, sceneTransform.y, sceneTransform.z);\n    }\n\n    channelsState.render(screenProgram, currentFrameNumber);\n\n    var iTime = window.performance.now() - startTime;\n    gl.uniform1f(screenProgram.iTime, iTime/1000);\n    gl.uniform1f(screenProgram.iFrame, currentFrameNumber);\n    gl.uniform4f(screenProgram.iMouse, cursor.currentX, cursor.currentY, cursor.clickX, cursor.clickY);\n    if (orientationChanged) {\n      orientationChanged = false;\n      gl.uniform4f(screenProgram.iOrientation, orientation.alpha, orientation.beta, orientation.gamma, orientation.absolute);\n    }\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n  }\n\n  function scheduleNextFrame() {\n    if (nextAnimationFrame) return;\n    nextAnimationFrame = requestAnimationFrame(animate);\n  }\n\n  function updateCode(parserResult) {\n    // We first try to update the program. If there are any errors, this call will throw\n    // and they will be handled by the editor state.\n    var updateProgram = util.createProgram(gl, shader.vertexShader, parserResult.code);\n\n    // If we reach this code, then we didn't throw, and we have a valid webgl code.\n    // Let's unload what we have now.\n    if (screenProgram) screenProgram.unload();\n\n    // And re-initialize all primitives.\n    startTime = window.performance.now();\n    screenProgram = updateProgram;\n\n    quadBuffer = util.createBuffer(gl, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]));\n    util.bindAttribute(gl, quadBuffer, screenProgram.a_pos, 2);\n\n    requestSizeUpdate = true;\n    requestTransformUpdate = true;\n    \n    scheduleNextFrame();\n\n    bus.fire('scene-ready', window.scene);\n  }\n\n  // Technically the following three functions are all related to panzoom\n  // and could be extracted into own module.\n  function goToOrigin() {\n    panzoom.showRectangle({\n      left: 0, right: window.innerWidth,\n      top: 0, bottom: window.innerHeight\n    });\n    \n    applyTransform(panzoom.getTransform());\n  }\n\n  function applyTransform(newTransform) {\n    var tx = newTransform.x/sceneWidth;\n    var ty = newTransform.y/sceneHeight;\n    var scale = newTransform.scale;\n\n    sceneTransform.x = tx;\n    sceneTransform.y = ty; \n    sceneTransform.z = scale;\n    requestTransformUpdate = true;\n    appState.saveTransform(tx, ty, scale);\n    scheduleNextFrame();\n  }\n\n  function restorePanzoom() {\n    var rect = appState.getVisibleRectangle(sceneWidth, sceneHeight);\n    if (rect) panzoom.showRectangle(rect);\n  }\n\n  function markInactiveIfNeeded() {\n    var now = new Date();\n    if (now - lastActivityTime > HIDE_UI_THRESHOLD) state.isActive = false; \n  }\n\n  function setActivityMonitorEnabled(enabled) {\n    if (!enabled) {\n      clearInterval(lastActiveIntervalId);\n      lastActiveIntervalId = false;\n      state.isActive = true;\n    } else if (!lastActiveIntervalId) {\n      lastActiveIntervalId = setInterval(markInactiveIfNeeded, 2000);\n    }\n  }\n\n  function activate() {\n    // This will reset lastActivityTime to now, so that \n    // activity monitor can make correct predictions.\n    lastActivityTime = new Date();\n    state.isActive = true;\n  }\n\n  function dispose() {\n    panzoom.dispose();\n\n    window.removeEventListener('resize', updateSize);\n    window.removeEventListener('mousemove', onMouseMove, true);\n    window.removeEventListener('mousedown', onMouseClick, true);\n    window.removeEventListener('touchstart', onTouchStart, true);\n    window.removeEventListener('touchmove', onTouchMove, true);\n    window.removeEventListener('keydown', activate, true);\n    window.removeEventListener('deviceorientation', onOrientationChange, true);\n\n    cancelAnimationFrame(nextAnimationFrame);\n    setActivityMonitorEnabled(false);\n    nextAnimationFrame = 0;\n  }\n\n  function listenToEvents() {\n    window.addEventListener('resize', updateSize);\n    window.addEventListener('mousemove', onMouseMove, true);\n    window.addEventListener('mousedown', onMouseClick, true);\n    window.addEventListener('touchstart', onTouchStart, true);\n    window.addEventListener('touchmove', onTouchMove, true);\n    window.addEventListener('keydown', activate, true);\n    window.addEventListener('deviceorientation', onOrientationChange, true);\n\n    // We don't want to hide UI if there is no old code.\n    if (appState.hasCode()) setActivityMonitorEnabled(true);\n  }\n\n  function onTouchStart(e) {\n    activate();\n    var firstTouch = e.touches[0];\n    if (!firstTouch) return;\n\n    setClick(firstTouch.clientX, firstTouch.clientY);\n    setHover(firstTouch.clientX, firstTouch.clientY);\n  }\n\n  function onOrientationChange(e) {\n    orientationChanged = true;\n    orientation.absolute = e.absolute;\n    orientation.alpha = Math.PI * e.alpha / 180;\n    orientation.beta = Math.PI * e.beta / 180;\n    orientation.gamma = Math.PI * e.gamma / 180;\n  }\n\n  function onTouchMove(e) {\n    activate();\n    var firstTouch = e.touches[0];\n    if (!firstTouch) return;\n    setHover(firstTouch.clientX, firstTouch.clientY);\n  }\n\n  function onMouseMove(e) { setHover(e.clientX, e.clientY); activate(); }\n\n  function onMouseClick(e) { setClick(e.clientX, e.clientY); activate(); }\n\n  function setHover(ex, ey) {\n    cursor.currentX = ex;\n    cursor.currentY = ey;\n  }\n\n  function setClick(ex, ey) {\n    cursor.clickX = ex;\n    cursor.clickY = ey;\n  }\n\n  function updateSize() {\n    setSceneSize(window.innerWidth, window.innerHeight);\n  }\n\n  function setSceneSize(width, height) {\n    canvas.width = width;\n    canvas.height = height;\n    sceneWidth = width;\n    sceneHeight = height;\n\n    restorePanzoom();\n    requestSizeUpdate = true;\n    scheduleNextFrame();\n  }\n}","module.exports = createShaders;\n\nconst appState = require('../appState');\nvar getFragmentCode = require('./shaders/getFragmentCode');\n\nfunction createShaders(main) {\n  const attribute = appState.webgl2 ? 'in' : 'attribute';\n  const varying = appState.webgl2 ? 'out' : 'varying';\n  return {\n    fragmentShader: getFragmentCode(main),\n    vertexShader: `${appState.webgl2 ? '#version 300 es' : ''}\nprecision highp float;\nuniform sampler2D iChannel0, iChannel1, iChannel2, iChannel3;\nuniform vec2 iChannel0Res, iChannel1Res, iChannel2Res, iChannel3Res;\nuniform float iFrame;\nuniform float iTime;\nuniform vec4 iMouse;\nuniform vec2 iResolution;\nuniform vec3 iTransform;\nuniform vec4 iOrientation;\n\n${attribute} vec2 a_pos;\n${varying} vec2 v_tex_pos;\n${varying} vec2 vPos;\n\nvoid main() {\n  vec2 vt = 2.*(a_pos - iTransform.xy)/iTransform.z;\n  v_tex_pos = vec2(vt.x - 1., 1. - vt.y);\n  vec2 vv = vec2(2. * a_pos.x - 1., 1. - 2.*a_pos.y);\n  vPos = a_pos;\n  gl_Position = vec4(vv, 0, 1);\n}    \n`\n  }\n}","/**\n * XMLHttpRequest wrapped into a promise.\n * \n * @param {String} url \n */\nmodule.exports = function request(url, options) {\n  if (!options) options = {};\n\n  return new Promise(download);\n\n  function download(resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    if (typeof options.progress === 'function') {\n      req.addEventListener('progress', updateProgress, false);\n    }\n\n    req.addEventListener('load', transferComplete, false);\n    req.addEventListener('error', transferFailed, false);\n    req.addEventListener('abort', transferCanceled, false);\n\n    req.open('GET', url);\n    if (options.responseType) {\n      req.responseType = options.responseType;\n    }\n    req.send(null);\n\n    function updateProgress(e) {\n      if (e.lengthComputable) {\n        options.progress({\n          loaded: e.loaded,\n          total: e.total,\n          percent: e.loaded / e.total\n        });\n      }\n    }\n\n    function transferComplete() {\n      if (req.status !== 200) {\n        reject({\n          err: `Unexpected status code ${req.status} when calling ${url}`,\n          response: req.response,\n          status: req.status\n        });\n        return;\n      }\n      var response = req.response;\n\n      if (options.responseType === 'json' && typeof response === 'string') {\n        // IE\n        response = JSON.parse(response);\n      }\n\n      resolve(response);\n    }\n\n    function transferFailed() {\n      reject(`Failed to download ${url}`);\n    }\n\n    function transferCanceled() {\n      reject(`Cancelled download of ${url}`);\n    }\n  }\n}","var request = require('./request');\n\nmodule.exports = function fetchGist(protoGist) {\n  var parts = protoGist.split('/');\n  return request(`https://api.github.com/gists/${parts[0]}`)\n  .then(res => extractFileContent(res, parts))\n  .catch(err => {\n    if (err && err.response && err.response.match(/rate limit/)) {\n      // Try one more time from cache\n      return request(`https://d2enmttf0dqrei.cloudfront.net/${parts[0]}`)\n        .then(res => extractFileContent(res, parts));\n    }\n  });\n}\n\nfunction extractFileContent(res, parts) {\n  var parsedRes = JSON.parse(res);\n  var fileName = parts.length > 1 && parts[1];\n  if (!fileName) {\n    // pick first file\n    fileName = Object.keys(parsedRes.files).filter(x => x.match(/\\.glsl$/))[0];\n  }\n  var file = parsedRes.files[fileName];\n  if (!file) throw new Error('Missing gist file ' + parts[0] + '/' + fileName);\n\n  return file.content;\n}","var bus = require('../bus');\nvar appState = require('../appState');\nvar getParsedShaderFunction = require('./getParsedShaderFunction');\n\n/**\n * A text editor state for the shader. Manages shader\n * program compilation and error reporting state.\n *\n * @param {Function} updateCode - a callback that is called then code is validated\n * and found to be correct.\n */\nmodule.exports = function createShaderCodeState(updateCode) {\n  bus.on('glsl-parser-ready', parseCode);\n  var currentShaderVersion = 0;\n\n  // What is the current code?\n  var currentShaderCode = appState.getCode();\n\n  // For delayed parsing result verification (e.g. when vue is loaded it\n  // can request us to see if there were any errors)\n  var parserResult;\n\n  loadCodeFromAppState();\n\n  var api = {\n    getCode,\n    setCode,\n    dispose,\n\n    // These properties are for UI only\n    code: currentShaderCode,\n    error: '',\n    errorDetail: '',\n    isFloatError: false \n  };\n\n  return api;\n\n  function dispose() {\n    bus.off('glsl-parser-ready', parseCode);\n  }\n\n  function getCode() {\n    return appState.getCode();\n  }\n\n  function setCode(shaderCode) {\n    if (shaderCode === currentShaderCode) {\n      // If code hasn't changed, let's make sure that there was no previous\n      // error\n      if (parserResult && parserResult.error) {\n        // And if there was error, let's revalidate code:\n        parseCode();\n      }\n      return;\n    } \n\n    trySetNewCode(shaderCode).then((result) => {\n      if (result.cancelled) return;\n\n      if (result && result.error) {\n        updateErrorInfo(result.error);\n        return result;\n      }\n\n      currentShaderCode = shaderCode;\n      api.code = shaderCode;\n      appState.saveCode(shaderCode);\n    });\n  }\n\n  function updateErrorInfo(parserResult) {\n    if (parserResult && parserResult.error) {\n      api.error = parserResult.error;\n      api.errorDetail = parserResult.errorDetail;\n      api.isFloatError = parserResult.isFloatError;\n    } else {\n      api.error = '';\n      api.errorDetail = '';\n      api.isFloatError = false;\n    }\n  }\n\n  function loadCodeFromAppState() {\n    let persistedCode = appState.getCode();\n    if (persistedCode) {\n      trySetNewCode(persistedCode).then(result => {\n        if (!result.error) return; // This means we set correctly;\n        // If we get here - something went wrong. see the console\n        console.error('Failed to restore previous shader code: ', result.error);\n        // Let's use default code\n        trySetNewCode(appState.getDefaultCode());\n      });\n    } else {\n      // we want a default code\n      trySetNewCode(appState.getDefaultCode());\n    }\n  }\n\n  function parseCode(customCode) {\n    return getParsedShaderFunction(customCode || currentShaderCode)\n      .then(currentResult => {\n        parserResult = currentResult\n        updateErrorInfo(parserResult.error);\n        return parserResult;\n      });\n  }\n\n  function trySetNewCode(shaderCode) {\n    currentShaderVersion += 1;\n    var capturedVersion = currentShaderVersion;\n    // step 1 - run through parser\n    return parseCode(shaderCode).then((parserResult) => {\n      if (capturedVersion !== currentShaderVersion) {\n        parserResult.cancelled = true;\n        // a newer request was issued. Ignore these results.\n        return parserResult;\n      }\n\n      if (parserResult.error) {\n        return parserResult;\n      }\n      // step 2 - run through real webgl\n      try {\n        updateCode(parserResult);\n        return parserResult;\n      } catch (e) {\n        return {\n          error: {\n            error: e.message\n          }\n        }\n      }\n    });\n  }\n}","/**\n * This is the main entry point into the application. It initializes\n * scene first, and then asynchronously loads Vue app \n */\nvar initScene = require('./scene');\nvar appState = require('./appState');\nvar bus = require('./bus');\nconst getGL = require('./getGL');\n\nvar canvas = document.getElementById('scene-canvas');\n// Canvas may not be available in test run\nif (canvas) initPixelPlay(canvas);\n\n// Tell webpack to split bundle, and download settings UI later.\nrequire.ensure('@/mainVue.js', () => {\n  // Settings UI is ready, initialize vue.js application\n  require('@/mainVue.js');\n});\n\nfunction initPixelPlay(canvas) {\n  var width = window.innerWidth;\n  var height = window.innerHeight;\n  canvas.width = width;\n  canvas.height =  height;\n  var gl = getGL(canvas, {antialias: false});\n\n  if (gl) {\n    window.webGLEnabled = true;\n    if (appState.ready) launch();\n    else bus.on('appstate-ready', launch)\n  } else {\n    // The Vue App will notify error later, when loaded.\n    window.webGLEnabled = false;\n  }\n}\n\nfunction launch() {\n  var scene = initScene(canvas);\n  window.scene = scene;\n}","var bus = require('../bus');\n\n// This is naive parser that is being used until the real `glsl-parser`\n// is loaded asynchronously. This parser assumes there are no errors\n// TODO: maybe I should be more careful here?\nvar glslParser = {\n  check(code) {\n    return {\n      code,\n      log: {\n        errorCount: 0\n      }\n    };\n  }\n};\n\nlet ide, inputSource;\n\n// glsl-parser is ~179KB uncompressed, we don't want to wait until it is downloaded.\n// So we load it asynchronously...\n// TODO: Replace this with a real module:\nrequire.ensure('wgl2npm/dist/src/exports/ide.js', () => {\n  // ... and replace the naive parser with the real one, when ready.\n  let {compileIDE} = require('wgl2npm/dist/src/exports/ide.js');\n  const {getSharedPrefix} = require('../util/shaders/getFragmentCode.js');\n  const wglAPI = require('../util/shaders/wgl2.glsl');\n\n  // TODO: Add either WebGL2 or WebGL1 to the imported tokens\n  const wgl2 = {name: 'wgl2', contents: wglAPI};\n  const shared = {name: 'shared', contents: getSharedPrefix()};\n  ide = compileIDE([wgl2, shared, {name: 'input', contents: ''} ]);\n  ide.sources.forEach(s => {\n    if (s.name === 'input') inputSource = s; \n  });\n\n  // notify interested parties, so that they can recheck code if they wish.\n  bus.fire('glsl-parser-ready'); \n});\n\nmodule.exports = function checkGLSL(code) {\n  if (ide) {\n    inputSource.tokens = null;\n    inputSource._lineOffsets = null;\n    inputSource.contents = code;\n    ide.updateState();\n    return ide;\n  }\n\n  return glslParser.check(code);\n}","var fetchGLSL = require('./fetchGLSL.js');\n\nvar pragmaInclude = '#include ';\nvar defineInclude = '#define ';\nvar nullCode = { code: '' }\n\n/**\n * Naively parses glsl code and tries to replace all `#pragma` statements\n * with empty string. Gives structured collection of pragma statements back\n * \n * @param {String} code \n */\nmodule.exports = function makePragmaParser(code) {\n  if (!code) return new Promise(resolve => resolve(nullCode));\n\n  var parsedLines = processLineByLine(code);\n  if (parsedLines.pending.length > 0) {\n    return Promise.all(parsedLines.pending).then(() => parsedLines)\n      .catch(error => { return {error: {error}}; });\n  }\n\n  return new Promise(resolve => resolve(parsedLines));\n}\n\nfunction processLineByLine(code) {\n  var pending = []\n  var lines = code.split('\\n');\n  var outputLines = [];\n  var currentIndex = 0;\n  var substitutes = new Map();\n\n  lines.forEach((line, index) => {\n    currentIndex = index;\n    if (line && (line[0] === '#' && line[1] !== 'v')) {\n      outputLines.push('');\n      processPragma(line);\n    } else {\n      if (substitutes.size > 0) {\n        line = replaceDefines(line);\n      }\n      outputLines.push(line);\n    }\n  });\n\n  return {\n    getCode,\n    pending\n  };\n\n  function getCode() {\n    return outputLines.join('\\n');\n  }\n\n  function processPragma(line) {\n    if (line.indexOf(pragmaInclude) === 0) {\n      var include = line.substr(pragmaInclude.length);\n      var insertIndex = currentIndex;\n      pending.push(fetchGLSL(include).then(code => {\n        outputLines[insertIndex] = code\n      }))\n    } else if (line.indexOf(defineInclude) === 0) {\n      var matches = line.match(/#define\\s+([^\\s].+)\\s+(.+)$/)\n      substitutes.set(matches[1], matches[2]);\n    }\n  }\n\n  function replaceDefines(line) {\n    // Note: this is very fragile, I know. Feel free to improve it.\n    substitutes.forEach((replacement, key) => {\n      line = line.replace(new RegExp(key, 'g'), replacement);\n    });\n    return line;\n  }\n}","/**\n * Okay, this file is a bit messy. Its primary responsibility\n * is to provide application state to scene and vue app. But it's\n * hard to define what application state mean in a clear way.\n * \n * For our purposes I consider anything stored in the query string to be\n * an application state\n */\nvar queryState = require('query-state');\nvar bus = require('./bus');\nvar isSmallScreen = require('./util/isSmallScreen');\nvar loadGist = require('./util/loadGist');\n\n// This will load current state from the query string.\nvar qs = queryState({}, { useSearch: true, });\n\nvar defaultCode = require('./util/shaders/main.glsl');\nvar currentCode = defaultCode; \n\nvar appStateReady;\nvar protoGist = qs.get('gist');\nif (protoGist) {\n  loadGist(protoGist).then((code) => {\n    currentCode = code;\n    appState.ready = true;\n    appState.settingsPanel.collapsed = isSettingsPanelCollapsedInitially();\n    bus.fire('appstate-ready');\n  }).catch(err => {\n    console.error(err);\n    currentCode = defaultCode; \n    appState.settingsPanel.loadError = err;\n    appState.settingsPanel.collapsed = false;\n    appState.ready = true;\n    bus.fire('appstate-ready');\n  });\n} else {\n  appStateReady = true\n\n  currentCode = qs.get('fc') || defaultCode;\n}\n\n// When user drags the scene, we don't want to immediately update the\n// query string. Some browsers would not respond well to high intensity.\n// Instead we debounce events (setTimeout, and clearTimeout if new events comes\n// before previously scheduled timeout is executed)\nvar pendingSaveCallback;\n\nvar appState = {\n  settingsPanel: {\n    // By default we will not show settings panel on small screen, or if\n    // there was a code in the query string - we just assume people want to\n    // see the result. If they are curious - they would click \"show editor\" button\n    collapsed: isSettingsPanelCollapsedInitially(),\n    codeLimitError: false,\n    loadError: null,\n    audioWarning: false,\n  },\n  webgl2: false,\n    // If this one is present, the no UI will ever be shown. Good for iframe embedding\n  hideUI: qs.get('hide-ui') !== undefined,\n  ready: appStateReady,\n  /**\n   * Request to save current code into query string\n   */\n  saveCode,\n\n  /**\n   * Checks whether query string has code.\n   */\n  hasCode,\n\n  /**\n   * Gets current code. Returns default code if no current code is present.\n   */\n  getCode,\n\n  /**\n   * Returns our default code\n   */\n  getDefaultCode,\n\n  /**\n   * Saves scene transform.\n   */\n  saveTransform,\n\n  /**\n   * Returns visible rectangle in screen coordinates.\n   */\n  getVisibleRectangle,\n\n  // Channel persistence\n  addChannel,\n  removeChannel,\n  getActiveChannels,\n  setSoundIOSWarning,\n  qs\n}\n\nvar isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\nfunction setSoundIOSWarning(isActive) {\n  if (!isIOS) return; // Only for iOS\n  appState.settingsPanel.audioWarning = isActive;\n}\n\nfunction hasCode() {\n  return currentCode !== defaultCode;\n}\n\nfunction addChannel(unit, src) {\n  qs.set('i' + unit, src);\n}\n\nfunction removeChannel(unit) {\n  qs.unset('i' + unit);\n}\n\nfunction getActiveChannels() {\n  var active = [];\n  for(var unit = 0; unit < 3; ++unit) {\n    var src = qs.get('i' + unit);\n    if (src !== undefined) active.push({unit, src});\n  }\n\n  return active;\n}\n\nfunction saveTransform(tx, ty, scale){\n  if (pendingSaveCallback) {\n    clearTimeout(pendingSaveCallback);\n  }\n\n  pendingSaveCallback = setTimeout(() => {\n    pendingSaveCallback = 0;\n    qs.set({ tx, ty,scale });\n  }, 300);\n}\n\nfunction getVisibleRectangle(sceneWidth, sceneHeight) {\n  var tx = qs.get('tx');\n  var ty = qs.get('ty');\n  var scale = qs.get('scale');\n  if (!(Number.isFinite(tx) || Number.isFinite(ty) || Number.isFinite(scale))) return;\n\n  return ({\n    left: -tx * sceneWidth/scale,\n    top: -ty * sceneHeight/scale,\n    right: -tx * sceneWidth/scale + sceneWidth/scale,\n    bottom: -ty * sceneHeight/scale + sceneHeight/scale,\n  })\n}\n\nqs.onChange(function() {\n  // This is need to back propagate properties when query string changes.\n  bus.fire('scene-ready', window.scene);\n});\n\nfunction getCode() { return currentCode; }\n\nfunction getDefaultCode() { return defaultCode; }\n\nfunction saveCode(code) {\n  if (code.length > 1000) {\n    appState.settingsPanel.codeLimitError = true;\n    qs.unset('fc')\n  } else {\n    appState.settingsPanel.codeLimitError = false;\n    qs.set({fc: code});\n    qs.unset('gist');\n  }\n  currentCode = code;\n}\n\nfunction isSettingsPanelCollapsedInitially() {\n  return isSmallScreen() || hasCode();\n}\n\nmodule.exports = appState;","module.exports = \"vec4 get_color(vec2 p) {\\n  vec2 z = vec2(0.); float t = 0.;\\n\\n  for(int i = 0; i < 32; ++i) {\\n    if (length(z) > 2.) break;\\n    // main fractal loop. Change it:\\n    z = c_mul(z, z) + p;\\n    t = float(i);\\n  }\\n\\n  return length(z) * vec4(t/64., t/32., t/24., 1.0);\\n}\"","/**\n * This module parses user defined shader code.\n */\n\nconst checkGLSL = require('./parserServer.js');\nvar pragmaParse = require('./pragmaParser');\nvar getFragmentCode = require('../util/shaders/getFragmentCode');\nconst appState = require('../appState');\n\n/**\n * Given a string, verifies that it is a valid glsl code,\n * and then returns code + log.\n * \n * @param {String} shaderCode \n */\nmodule.exports = function getParsedShaderFunction(shaderCode) {\n  var libAndCode = getFragmentCode(shaderCode);\n\n  return pragmaParse(libAndCode).then(pragmaParseResult => {\n    if (pragmaParseResult.error) {\n      return pragmaParseResult;\n    }\n\n    var parsedCode = pragmaParseResult.getCode();\n\n    var parserResult = checkGLSL(parsedCode); //{ globals: complexGlobals });\n    parserResult.code = parsedCode;\n    parserResult.main = shaderCode;\n\n    if (parserResult.log.errorCount && !appState.webgl2) parserResult.error = parserError(parserResult.log);\n\n    return parserResult;\n  });\n}\n\nfunction parserError(log) {\n  let diag = log.diagnostics[0];\n  // TODO probably need to check kind (errors are 0, warnings are 1)\n  let firstError = diag.range;\n  let lineColumn = firstError.lineColumn();\n  let source = firstError.source;\n  let offset = source._lineOffsets[lineColumn.line]\n  let line = source.contents.substr(offset,  lineColumn.column);\n  line += source.contents.substring(firstError.start, firstError.end);\n  let prefix = 'Line ' + lineColumn.line + ': ';\n  let diagText = diag.text;\n  return {\n    error: \n      prefix + line + '\\n' +\n      whitespace(prefix.length) + whitespace(lineColumn.column) + '^',\n    errorDetail: diagText,\n    isFloatError: isFloatError(diagText)\n  };\n}\n\nfunction isFloatError(diagText) {\n  return diagText.indexOf('\"int\"') > -1 &&\n    diagText.indexOf('\"float\"')  > -1;\n}\n\nfunction whitespace(length) {\n  return new Array(length + 1).join(' ');\n}\n","var loadImage = require('./util/loadImage');\nvar glUtils = require('./util/gl-utils');\nvar appState = require('./appState');\nvar audioInput = require('./channels/audioInput');\nvar isSoundCloud = require('./channels/isSoundCloud');\n\nmodule.exports = function (gl) {\n  var takenUnits = new Set();\n  var MAX_UNITS_COUNT = 8;\n\n  // TODO: need to have internal list, so that vue does not interfere with performance\n  var viewModels = [];\n  var models = [];\n  var api = {\n    list: viewModels,\n    removeChannel,\n    addChannel,\n    render\n  };\n\n  restoreState();\n\n  return api;\n\n  function restoreState() {\n    var activeChannels = appState.getActiveChannels();\n    if (!activeChannels) return;\n    activeChannels.forEach(channelInfo => {\n      addChannel(channelInfo.src, channelInfo.unit);\n    });\n  }\n\n  function render(program, frameNumber) {\n    for (var i = 0; i < models.length; ++i) {\n      models[i].render(program, frameNumber);\n    }\n  }\n\n  function removeChannel(channel) {\n    if (!takenUnits.has(channel.unit)) throw new Error('You are trying delete something that does not exist');\n\n    var modelIndex = getIndexOfModelWithUnit(models, channel.unit);\n    if (modelIndex === -1) throw new Error('You are trying delete something that does not exist');\n\n    models[modelIndex].dispose();\n    models.splice(modelIndex, 1);\n\n    var viewModelIndex = getIndexOfModelWithUnit(viewModels, channel.unit);\n    viewModels.splice(viewModelIndex, 1);\n    takenUnits.delete(channel.unit);\n    appState.removeChannel(channel.unit);\n\n\n    var hasAudio = false;\n    models.forEach(m => { \n      if (m.kind === 'audio') hasAudio = true;\n    })\n    appState.setSoundIOSWarning(hasAudio);\n  }\n\n  function addChannel(src, unit) {\n    if (typeof src !== 'string') throw new Error('implement me');\n\n    // Client knows where they want to bind. Respect that, unless it's already taken:\n    if (takenUnits.has(unit)) throw new Error('This channel is already taken');\n\n    // if they don't care about the channel - pick first available:\n    if (unit === undefined) unit = getAvailableUnit();\n\n    // If we still don't have it, then...\n    if (unit === undefined) throw new Error('All channels are busy');\n\n    // TODO: I still haven't figured out a lot. This is a mess.\n    // Think of it as if it was a gradient descent to optimal solution, and the code below is step 0.\n    var input;\n    if (isSoundCloud(src)) {\n      input = audioInput(src, gl, unit);\n      appState.setSoundIOSWarning(true);\n    } else if (src.match(/\\.mp3$/)) {\n      input = audioInput(src, gl, unit);\n      appState.setSoundIOSWarning(true);\n    } else if (isImage(src)) {\n      input = imageInput(src, gl, unit);\n    } \n\n    if (!input) throw new Error('not implemented');\n    models.push(input);\n    takenUnits.add(unit);\n\n    var inputViewModel = {\n      kind: input.kind,\n      name: `iChannel${unit}`,\n      unit,\n      error: null,\n      state: 'loading',\n      src: src,\n      model: input\n    };\n    viewModels.push(inputViewModel); \n    input.load().then(() => {\n      inputViewModel.state = 'ready'\n      appState.addChannel(unit, src);\n    }).catch(err => {\n      inputViewModel.state = 'error'\n      inputViewModel.error = err;\n    });\n  }\n\n  function getAvailableUnit() {\n    for (var i = 0; i < MAX_UNITS_COUNT; ++i) {\n      if (!takenUnits.has(i)) return i;\n    }\n  }\n\n  function isImage(/* value */) {\n    // TODO: Implement me.\n    return true;\n  }\n}\n\nfunction imageInput(value, gl, unit) {\n  var needsBinding = true;\n  var texture, width, height;\n  var channelName = 'iChannel' + unit;\n  var resName = channelName + 'Res';\n\n  var api = Object.freeze({\n    kind: 'image',\n    unit,\n    load,\n    dispose,\n    render\n  });\n\n  return api;\n\n  function render(program) {\n    if (!texture) return;\n\n    if (needsBinding) {\n      needsBinding = false;\n    }\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    // TODO: This probably could be optimized. E.g. re-read only when program has changed?\n    gl.uniform1i(program[channelName], unit);\n    gl.uniform2f(program[resName], width, height);\n  }\n\n  function dispose() {\n    if (texture) {\n      gl.deleteTexture(texture);\n      texture = null;\n    } \n  }\n\n  function load() {\n    return loadImage(value).then(image => {\n      texture = glUtils.createTexture(gl, image);\n      width = image.width;\n      height = image.height;\n      return api;\n    });\n  }\n}\n\nfunction getIndexOfModelWithUnit(arr, modelUnit) {\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i].unit === modelUnit) return i;\n  }\n\n  return -1;\n}","var appState = require('./appState');\n\nmodule.exports = function getGL(canvas, ctxOptions) {\n  var gl;\n  try {\n    gl = canvas.getContext('webgl2', ctxOptions);\n    // yeah, this is bad (mixing side effects here)..\n    if (gl) appState.webgl2 = true;\n  } catch (err) {\n    console.error('Failed to get webgl2 context', err)\n    gl = null;\n  }\n  if (!gl) {\n    // try webgl1:\n    gl = canvas.getContext('webgl2', ctxOptions) || \n      canvas.getContext('experimental-webgl', ctxOptions);\n  }\n\n  return gl;\n}","module.exports = \"// Performs bezier easing.\\n// See http://cubic-bezier.com/#.17,.67,.83,.67 for details\\nvec2 bezier(vec2 p0, vec2 p1, vec2 p2, vec2 p3, float t) {\\n  float one_minus_t = 1. - t;\\n  return one_minus_t * one_minus_t * one_minus_t * p0 + \\n    3. * one_minus_t * one_minus_t * t * p1 + \\n    3. * one_minus_t * t * t * p2 +\\n    t * t * t * p3;\\n}\\n\\n// Animates t, using control points p1 and p2.\\n// It is very similar to CSS based cubic-bezier timing funciton.\\nfloat bease(float t, vec2 p1, vec2 p2) {\\n  vec2 p0 = vec2(0.);\\n  vec2 p3 = vec2(1.);\\n  vec2 res = bezier(p0, p1, p2, p3, t);\\n  return res.y;\\n}\\n\\n// Produces a uniform value between 0 and 1 over `framesCount` frames\\nfloat timef(float framesCount) {\\n  return mod(iFrame,framesCount)/framesCount;\\n}\\n\\n// Performs bezier easing with two controls points at `vec2(0.42, 0)` and `vec2(1)`\\nfloat bease(float t) {\\n  return bease(t, vec2(0.42, 0), vec2(1));\\n}\"","module.exports = loadImage;\n\nfunction loadImage(src) {\n  var resolveImage, rejectImage;\n\n  var image = new Image();\n  image.crossOrigin = '';\n\n  image.onload = imageLoaded;\n  image.onerror = reportError;\n  image.src = src;\n\n  return new Promise((resolve, reject) => {\n    resolveImage = resolve;\n    rejectImage = reject; \n  });\n\n  function reportError(err) { rejectImage(err); }\n  function imageLoaded() { resolveImage(image); }\n}","module.exports = \"// based on https://github.com/rust-num/num-complex/blob/master/src/lib.rs\\n// Copyright 2013 The Rust Project Developers. MIT license\\n// Ported to GLSL by Andrei Kashcha (github.com/anvaka), available under MIT license as well.\\n\\n\\n// Returns a complex number z = 1 + i * 0.\\nvec2 c_one() { return vec2(1., 0.); }\\n\\n// Returns a complex number z = 0 + i * 1.\\nvec2 c_i() { return vec2(0., 1.); }\\n\\nfloat arg(vec2 c) {\\n  return atan(c.y, c.x);\\n}\\n\\n// Returns conjugate of a complex number.\\nvec2 c_conj(vec2 c) {\\n  return vec2(c.x, -c.y);\\n}\\n\\nvec2 c_from_polar(float r, float theta) {\\n  return vec2(r * cos(theta), r * sin(theta));\\n}\\n\\nvec2 c_to_polar(vec2 c) {\\n  return vec2(length(c), atan(c.y, c.x));\\n}\\n\\n// Computes `e^(c)`, where `e` is the base of the natural logarithm.\\nvec2 c_exp(vec2 c) {\\n  return c_from_polar(exp(c.x), c.y);\\n}\\n\\n\\n// Raises a floating point number to the complex power `c`.\\nvec2 c_exp(float base, vec2 c) {\\n  return c_from_polar(pow(base, c.x), c.y * log(base));\\n}\\n\\n// Computes the principal value of natural logarithm of `c`.\\nvec2 c_ln(vec2 c) {\\n  vec2 polar = c_to_polar(c);\\n  return vec2(log(polar.x), polar.y);\\n}\\n\\n// Returns the logarithm of `c` with respect to an arbitrary base.\\nvec2 c_log(vec2 c, float base) {\\n  vec2 polar = c_to_polar(c);\\n  return vec2(log(polar.r), polar.y) / log(base);\\n}\\n\\n// Computes the square root of complex number `c`.\\nvec2 c_sqrt(vec2 c) {\\n  vec2 p = c_to_polar(c);\\n  return c_from_polar(sqrt(p.x), p.y/2.);\\n}\\n\\n// Raises `c` to a floating point power `e`.\\nvec2 c_pow(vec2 c, float e) {\\n  vec2 p = c_to_polar(c);\\n  return c_from_polar(pow(p.x, e), p.y*e);\\n}\\n\\n// Raises `c` to a complex power `e`.\\nvec2 c_pow(vec2 c, vec2 e) {\\n  vec2 polar = c_to_polar(c);\\n  return c_from_polar(\\n     pow(polar.x, e.x) * exp(-e.y * polar.y),\\n     e.x * polar.y + e.y * log(polar.x)\\n  );\\n}\\n\\n// Computes the complex product of `self * other`.\\nvec2 c_mul(vec2 self, vec2 other) {\\n    return vec2(self.x * other.x - self.y * other.y, \\n                self.x * other.y + self.y * other.x);\\n}\\n\\nvec2 c_div(vec2 self, vec2 other) {\\n    float norm = length(other);\\n    return vec2(self.x * other.x + self.y * other.y,\\n                self.y * other.x - self.x * other.y)/(norm * norm);\\n}\\n\\nvec2 c_sin(vec2 c) {\\n  return vec2(sin(c.x) * cosh(c.y), cos(c.x) * sinh(c.y));\\n}\\n\\nvec2 c_cos(vec2 c) {\\n  // formula: cos(a + bi) = cos(a)cosh(b) - i*sin(a)sinh(b)\\n  return vec2(cos(c.x) * cosh(c.y), -sin(c.x) * sinh(c.y));\\n}\\n\\nvec2 c_tan(vec2 c) {\\n  vec2 c2 = 2. * c;\\n  return vec2(sin(c2.x), sinh(c2.y))/(cos(c2.x) + cosh(c2.y));\\n}\\n\\nvec2 c_atan(vec2 c) {\\n  // formula: arctan(z) = (ln(1+iz) - ln(1-iz))/(2i)\\n  vec2 i = c_i();\\n  vec2 one = c_one();\\n  vec2 two = one + one;\\n  if (c == i) {\\n    return vec2(0., 1./1e-10);\\n  } else if (c == -i) {\\n    return vec2(0., -1./1e-10);\\n  }\\n\\n  return c_div(\\n    c_ln(one + c_mul(i, c)) - c_ln(one - c_mul(i, c)),\\n    c_mul(two, i)\\n  );\\n}\\n\\nvec2 c_asin(vec2 c) {\\n // formula: arcsin(z) = -i ln(sqrt(1-z^2) + iz)\\n  vec2 i = c_i(); vec2 one = c_one();\\n  return c_mul(-i, c_ln(\\n    c_sqrt(c_one() - c_mul(c, c)) + c_mul(i, c)\\n  ));\\n}\\n\\nvec2 c_acos(vec2 c) {\\n  // formula: arccos(z) = -i ln(i sqrt(1-z^2) + z)\\n  vec2 i = c_i();\\n\\n  return c_mul(-i, c_ln(\\n    c_mul(i, c_sqrt(c_one() - c_mul(c, c))) + c\\n  ));\\n}\\n\\nvec2 c_sinh(vec2 c) {\\n  return vec2(sinh(c.x) * cos(c.y), cosh(c.x) * sin(c.y));\\n}\\n\\nvec2 c_cosh(vec2 c) {\\n  return vec2(cosh(c.x) * cos(c.y), sinh(c.x) * sin(c.y));\\n}\\n\\nvec2 c_tanh(vec2 c) {\\n  vec2 c2 = 2. * c;\\n  return vec2(sinh(c2.x), sin(c2.y))/(cosh(c2.x) + cos(c2.y));\\n}\\n\\nvec2 c_asinh(vec2 c) {\\n  // formula: arcsinh(z) = ln(z + sqrt(1+z^2))\\n  vec2 one = c_one();\\n  return c_ln(c + c_sqrt(one + c_mul(c, c)));\\n}\\n\\nvec2 c_acosh(vec2 c) {\\n  // formula: arccosh(z) = 2 ln(sqrt((z+1)/2) + sqrt((z-1)/2))\\n  vec2 one = c_one();\\n  vec2 two = one + one;\\n  return c_mul(two,\\n      c_ln(\\n        c_sqrt(c_div((c + one), two)) + c_sqrt(c_div((c - one), two))\\n      ));\\n}\\n\\nvec2 c_atanh(vec2 c) {\\n  // formula: arctanh(z) = (ln(1+z) - ln(1-z))/2\\n  vec2 one = c_one();\\n  vec2 two = one + one;\\n  if (c == one) {\\n      return vec2(1./1e-10, vec2(0.));\\n  } else if (c == -one) {\\n      return vec2(-1./1e-10, vec2(0.));\\n  }\\n  return c_div(c_ln(one + c) - c_ln(one - c), two);\\n}\\n\\n// Attempts to identify the gaussian integer whose product with `modulus`\\n// is closest to `c`\\nvec2 c_rem(vec2 c, vec2 modulus) {\\n  vec2 c0 = c_div(c, modulus);\\n  // This is the gaussian integer corresponding to the true ratio\\n  // rounded towards zero.\\n  vec2 c1 = vec2(c0.x - mod(c0.x, 1.), c0.y - mod(c0.y, 1.));\\n  return c - c_mul(modulus, c1);\\n}\\n\\nvec2 c_inv(vec2 c) {\\n  float norm = length(c);\\n\\treturn vec2(c.x, -c.y) / (norm * norm);\\n}\\n\"","// Based on https://github.com/michaelbromley/soundcloud-visualizer\n// Copyright (c) 2013 Michael Bromley <michael@michaelbromley.co.uk>\n// Adopted to pplay needs by Andrei Kashcha. (C) 2018 MIT License\n\n/* global SC */\nmodule.exports = loadSoundCloudStream;\n\nvar client_id = \"oyOHfaO0Xhi6nqwntte71KmwsEQbCmCG\"; // to get an ID go to https://developers.soundcloud.com/\n\nfunction loadSoundCloudStream(track_url) {\n  if (typeof SC === 'undefined') {\n      return new Promise((resolve, reject) => {\n          var scAPI = document.createElement('script');\n          scAPI.setAttribute('src', '//connect.soundcloud.com/sdk.js');\n          scAPI.onload = resolve;\n          scAPI.onerror = reject;\n          document.head.appendChild(scAPI);\n      }).then(() => loadSoundCloudStream(track_url));\n  }\n\n  return new Promise((successCallback, errorCallback) => {\n    SC.initialize({client_id: client_id});\n\n    SC.get('/resolve', { url: track_url }, function(sound) {\n      if (sound.errors) {\n        var errorMessage = \"\";\n        for (var i = 0; i < sound.errors.length; i++) {\n          errorMessage += sound.errors[i].error_message + '.';\n        }\n        errorMessage += 'Make sure the URL has the correct format: https://soundcloud.com/user/title-of-the-track';\n        errorCallback(errorMessage);\n      } else {\n        var streamUrl;\n        if (sound.kind === 'playlist') {\n            var streamPlaylistIndex = 0;\n            streamUrl = sound.tracks[streamPlaylistIndex].stream_url + '?client_id=' + client_id;\n        } else {\n            streamUrl = sound.stream_url + '?client_id=' + client_id; \n        }\n        successCallback(streamUrl);\n      }\n    });\n  });\n}\n","/* eslint-disable no-redeclare */\n/**\n * This is work in progress. Mostly loads soundcloud sound stream and makes\n * it accessible via texture to a shared.\n * \n * Read more here: https://github.com/anvaka/pplay#audio-channel\n */\nvar isSoundCloud = require('./isSoundCloud');\nvar loadSoundCloudStream = require('./loadSoundCloudStream');\nvar appState = require('../appState');\n\nmodule.exports = audioInput;\n\nfunction audioInput(value, gl, unit) {\n  var fftSize = 1024;\n  var audioTexture;\n  var channelName = 'iChannel' + unit;\n  var resName = channelName + 'Res';\n  var player;\n  var analyser;\n  var frequencyData = new Uint8Array(fftSize);\n\n  var height = 4; // How many rows we have.\n  var width = 512; // 512 frequencies.\n\n  // Two rows, 512 columns each. Each column is a frequency value;\n  // If iFrame is odd, then:\n  //  - first row stores previous frame audio data and\n  //  - second row stores this frame audio data\n  // Otherwise:\n  //  - first row stores this frame audio data\n  //  - second row store last frame data.\n  // \n  // Because frequencies are store as rgba values:\n  //  - r - is current frequency value (range 0..255)\n  //  - g - is avg frequency value (range 0..255)\n  //  - b - is long avg frequency value (range 0..255)\n  //  - a - unused at the moment\n  var audioData;\n  var streamUrl;\n\n  var api = Object.freeze({\n    kind: 'audio',\n    unit,\n    load,\n    dispose,\n    render,\n    initPlayer\n  });\n\n  return api;\n\n  function load() {\n    if (isSoundCloud(value)) {\n      return loadSoundCloudStream(value)\n        .then(url => streamUrl = url)\n        .then(() => {\n          if (appState.hideUI) {\n            // in this mode, there is no vue app to initialize audio. Do it ourselves\n            var player = getOrMakePlayerEl();\n            return initPlayer(player);\n          }\n        });\n    } else if (value.match(/\\.mp3$/)) {\n      streamUrl = value;\n      // in this mode, there is no vue app to initialize audio. Do it ourselves\n      var player = getOrMakePlayerEl();\n      return Promise.resolve(initPlayer(player));\n    }\n    throw new Error('non soundcloud files are not supported yet.');\n  }\n\n  function initPlayer(playerEl) {\n    player = playerEl;\n    player.crossOrigin = 'anonymous';\n    player.autoplay = true;\n\n    var audioCtx = new (window.AudioContext || window.webkitAudioContext);\n    analyser = audioCtx.createAnalyser();\n    analyser.fftSize = fftSize;\n\n    var source = audioCtx.createMediaElementSource(player);\n    source.connect(analyser);\n    analyser.connect(audioCtx.destination);\n\n    audioData = new Uint8Array(width * height * 4); \n    audioTexture = createTexture(gl.LINEAR, audioData, width, height);\n\n    player.setAttribute('src', streamUrl);\n    player.play();\n    \n    player.removeEventListener('ended', onPlayerEnded);\n    player.addEventListener('ended', onPlayerEnded);\n\n    player.removeEventListener('play', onPlayerStarted);\n    player.addEventListener('play', onPlayerStarted);\n\n    player.removeEventListener('pause', onPlayerEnded);\n    player.addEventListener('pause', onPlayerEnded);\n  }\n\n  function createTexture(filter, data, width, height) {\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\n    if (data instanceof Uint8Array) {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    } \n    return texture;\n  }\n\n  function onPlayerEnded() {\n  }\n\n  function onPlayerStarted() {\n  }\n\n  function dispose() {\n    if (audioTexture) {\n      gl.deleteTexture(audioTexture);\n      audioTexture = null;\n      // TODO: Do I need to disconnect?\n    }\n  }\n\n  function render(program, frameNumber) {\n    if (!audioTexture) return;\n\n    analyser.getByteFrequencyData(frequencyData);\n    //for (var i = 0; i < frequencyData.length; ++i) frequencyData[i] = 1;\n    var max = fftSize/2;\n\n    // We are going to alternate between first and second row to\n    // store current/previous frequency data\n    var prevPosition = (frameNumber % 2) * max;\n    var currentPosition = ((frameNumber + 1) % 2) * max;\n\n    for (var i = 0; i < max; ++i) {\n      var ci = (i + currentPosition) * 4;\n      var previ = (i + prevPosition) * 4;\n\n      var immediateValue = frequencyData[i];\n\n      var avgValue = audioData[previ + 1];\n      var longAvg = audioData[previ + 2];\n      audioData[ci] = immediateValue;\n      audioData[ci + 1] = avgValue * 0.5 + immediateValue * 0.5;\n      audioData[ci + 2] = longAvg * 0.9 + immediateValue * 0.1;\n    }\n\n    // TODO: This can be moved into upper array.\n    var prevAgg = prevPosition + 2 * max;\n    var currentAgg = currentPosition + 2 * max;\n    // now perform aggregation\n    for (var i = 0; i < max; i += 2) {\n      var p = (frequencyData[i] + frequencyData[i + 1])/2;\n      var aggOffset = (i/2 + currentAgg) * 4; // aggregation takes only first half\n      var pAggOffset = (i/2 + prevAgg) * 4; \n\n      var aggAvgValue = audioData[pAggOffset + 1];\n      var aggLongAvg = audioData[pAggOffset + 2];\n\n      audioData[aggOffset] = p;\n      audioData[aggOffset + 1] = (aggAvgValue + p) * 0.5;\n      audioData[aggOffset + 2] = aggLongAvg * 0.9 + p * 0.1;\n    }\n\n    // aggregate aggregation. Note, this builds hierarchies of aggregation.\n    // [0..255] - built by previous loop, and contains avg between two source frequencies\n    // [256..256 + 128] - contains average between four source frequencies\n    // [384 .. 384 + 64] - averages between 8 source frequencies, and so on.\n    // The `(last element) - 1` of the array will be an overall average.\n    var halfMax = max/2;\n    for (var i = 0; i < max - 2; i += 2) {\n      var p = (audioData[(i + currentAgg) * 4] + audioData[(i + currentAgg + 1) * 4])*0.5;\n      var aggOffset = (halfMax + i/2 + currentAgg) * 4;\n      var pAggOffset = (halfMax + i/2 + prevAgg) * 4;\n\n      var aggAvgValue = audioData[pAggOffset + 1];\n      var aggLongAvg = audioData[pAggOffset + 2];\n\n      audioData[aggOffset] = p;\n      audioData[aggOffset + 1] = (aggAvgValue + p) * 0.5;\n      audioData[aggOffset + 2] = aggLongAvg * 0.9 + p * 0.1;\n    }\n\n    // We can also compute these in the shader\n    // var immediateRelative = Math.abs(longAvg) < 0.001 ? 1 : immediateValue/longAvg;\n    // var avgRelative = Math.abs(longAvg) < 0.001 ? 1 : avgValue / longAvg;\n\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    gl.bindTexture(gl.TEXTURE_2D, audioTexture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, audioData);\n    gl.uniform1i(program[channelName], unit);\n\n    gl.uniform2f(program[resName], player.currentTime, player.duration);\n  }\n}\n\nfunction getOrMakePlayerEl() {\n  var playerEl = document.querySelector('audio');\n  if (playerEl) return playerEl;\n  playerEl = document.createElement('audio');\n  playerEl.preload = true;\n  playerEl.autobuffer = true;\n  playerEl.constrols = '';\n  // TODO: Better solution?\n  playerEl.style.visibility = 'hidden'\n\n  document.body.appendChild(playerEl);\n  return playerEl;\n}","var loadedLinks = new Map(); // from link to response\nvar request = require('../util/request');\n\nmodule.exports = function fetchGLSL(link) {\n  if (!link) return Promise.reject('Missing link')\n  var trimmed = link.trim();\n  if (!trimmed) return Promise.reject('Missing link');\n\n  let cachedResponse = loadedLinks.get(trimmed)\n  if (cachedResponse) return Promise.resolve(cachedResponse);\n\n  return request(link).then(code => {\n    loadedLinks.set(link, code);\n    return code;\n  });\n}","/**\n * This is a simple way to pass messages between application components.\n */\nvar eventify = require('ngraph.events');\n\nmodule.exports = eventify({});"],"sourceRoot":""}